<h1>新年春联生成器-扣子案例拆解</h1>
<blockquote>来源：<a href="https://mb8jo3jay5.feishu.cn/docx/DIGpdAqamotQeOx2wQPcnb6cnKf">https://mb8jo3jay5.feishu.cn/docx/DIGpdAqamotQeOx2wQPcnb6cnKf</a></blockquote>
<p>最近在帮一个客户做智能体，他们的面向大学生和社会工作者的英语APP参加了鸿蒙的一个应用大赛，已经进入决赛，想要在APP里增加更多AI方面的创意，请教大家有没有更好的想法啊，一起交流，一起参与，目前是做了剧本杀智能体放进APP里。</p>

<p>为了感谢大家，我和合伙人出了一篇制作新年春联生成器的拆解，和大家一起交流，可以修改内容，用在很多地方</p>

<h1>一、效果图</h1>
<p><img src="img/6078e2feef8a4219f342e38133a93e0c.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/BQ0Nb6Qz5oIIsAxmcQBcJUAUnwc/"/></p>
<p><img src="img/420dc12649cec106ac71e8fc3b561d8b.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/PAw8bwpWfo3cioxlTaXc9UkLnIb/"/></p>
<p><img src="img/1e2d199225ad9bda9fd6653b7f8b434d.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/PG69by5YKomrgYxsJtYc1yCvn2c/"/></p>

<p>工作流：想要一键生成对联图片</p>
<p>1、用户输入内容</p>
<p>2、根据内容直接作为横批，或者以此为主题创作</p>
<p>3、直接出图，用到画板功能</p>
<p><img src="img/42bef0d7630bc83e1c46af25b35bfee7.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Flu3b7FMZoZbcuxOJEbcov0qnPc/"/></p>
<h1>二、开始行动</h1>
<h2>1、打开扣子网址</h2>
<p>国内：https://www.coze.cn/</p>
<p>国外：https://www.coze.com/</p>

<p>国内版的扣子可以用国内的大模型，国外版的扣子可以用国外的大模型，正常我们用国内版的就行</p>

<p>这是主页</p>
<p><img src="img/d894b75ab5b23325fa2371d657b45798.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/TSoob4PQAo3CXYxWbvgc5xcLnGh/"/></p>

<p>主页有官方的教程，主页下面是工作空间，刚使用是只有个人空间，然后我们可以创建团队空间，在团队空间，可以协同做一个智能体，资源也可以共享</p>
<p><img src="img/6e74182466cb8e3f0638de56d35efdbb.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/KtKdbj4xmo2ToDx6QGocg8jpn9d/"/></p>

<p>点击创建新团队就可以了</p>
<p><img src="img/4109e7ce6029f041b176c2316e5680c8.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/W4EtbMijzorW9UxEhGtcos8bnqc/"/></p>

<p>商店里是别人做好的，还是扣子官方制作的</p>
<p><img src="img/352937feac81eb11d46f03ffe2a9107c.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/DeYXb06Eio69tjxD8EGcq1pEnyb/"/></p>

<p>模板是可以复制的智能体，里面的工作流也可以复制，有扣子官方做的是免费的，有其他人做的，可以设置免费或者收费</p>
<p><img src="img/d7d0a99d843221285af90ca1828354b0.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/FpStbHaZfovDAMxrujSc2EHgnWf/"/></p>

<p>其他的都很简单，大家直接点进去就明白了，我们直接进入主题</p>

<p>点击右上角的+，会有两个，一个是创建智能体，一个是创建应用，应用你可以简单的理解，画面更美观，可以随意排版页面。如果我们刚开始不熟悉，直接从创建智能体开始</p>

<p><img src="img/83dcf7174b3e1adef7009ad17bc41a9a.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Rn9VbzZAgoPq6ux3h8uchrmcnlb/"/></p>

<p><img src="img/1783586ae084211a6a424dd898a4dd3e.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/QbGsbL4dvokrK4xJZMZcovavnih/"/></p>

<p>创建好以后，就来到了这个页面</p>
<p><img src="img/d4293249454b9f6696acad849d64bdea.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/CLnkbOXLvoJmLSxORX4cyQwjnVf/"/></p>

<p>其他先不用管，点这里添加工作流</p>
<p><img src="img/38bf5e5d77815b5739d512d9a7a00017.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/RQswbchZEo6xS4xsEw0c1bcRne9/"/></p>

<p>点创建工作流，下面还有你之前发布过的资源库工作流，如果你在团队空间做，团队里其他人做的工作流也可以直接用，再下面还有官方示例，很方便。</p>
<p><img src="img/159846675e90f5245709007744f89e18.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/I2h5bIDPXo8QWSx45QRcxmB4nZf/"/></p>
<p>点完创建工作流后，显示有两个，这里我们用工作流</p>
<p><img src="img/923bf97da9b3dcb72a707ae3fb608247.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Jsp9bCvj9ozKasx9wI6cFFHPnob/"/></p>

<p>然后输入工作流名字，要用英文，输入不对，会有提示，在描述里写具体描述，一是让大模型更好理解，二是等以后做的多了，通过介绍就知道这个工作流是干嘛用的</p>
<p><img src="img/02c8c85ffffe30f230fa67a5fb1e0431.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Mxi0bIDXZo88HYxXvpZcsHXQn5b/"/></p>

<p>接着来到工作流页面，固定的有两个节点，一是开始节点，是用户输入的内容，最后一个是结束节点，是智能体最后的输出，最下面是扣子新出的工作流模板，点击后直接使用，注意各节点之间要用线连接起来，直接点那个蓝色的小点就可以连接了。</p>
<p><img src="img/0c98c3fa8303e187cee62a094a1c86ec.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/UwzYb8RDloRyH7xaOEScMcK0nIb/"/></p>

<p>下面我们开始做第一个节点</p>
<h2>01、开始节点</h2>
<p><img src="img/cf3f53553a7348c750635110e00461ef.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/ILdEbI0iWoOStVxdkR0cLeH9ng6/"/></p>
<p>点击开始节点，右边就会显示，开始节点需要配置的内容</p>
<p>变量名：input（这里你可以输入其他内容，但必须是英文，表示用户输入的内容）</p>
<p>变量类型：string</p>

<p>对变量类型不理解的可以看下哔哩哔哩这个视频：https://www.bilibili.com/video/BV1cS421d7Lo?spm_id_from=333.788.videopod.episodes&amp;vd_source=2fbc07ca9d77406a24df42e65c625454&amp;p=21</p>

<h2>02、大模型节点</h2>
<p>点击下面的“添加节点”，选择大模型，和开始节点连接起来，</p>
<p><img src="img/6dc4a34d3608389f65e68bccc6e20ff0.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/TjN1bhnTBoYCY1x6ghLcktzZn2d/"/></p>
<p>选择大模型，开始配置</p>
<p><img src="img/ea997099482abed74b8689b8555dc367.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/LXT1bd1Cloy1omxD9JOc53sjnRe/"/></p>

<p>最上面是单次处理和批处理。单次就是大模型一次只处理一个信息，比如我们要提取视频连接内容，只能发给智能体一条链接，如果选择批处理，就可以设置成，一次性发多条链接，大模型也可以同时处理，这里我们用单次。</p>

<p>然后在模型里，我们可以选择想要的模型，对应的都有介绍。</p>
<p><img src="img/34aa9f9c6e5f2c7e9ca08525312a9899.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/V1RBbVM4Ro3imgxvcUBchzicnEb/"/></p>

<p>在技能里，可以添加插件，让大模型调用各种能力，注意，在刚打开的智能体页面，也可以添加插件，我测试下来，插件放在大模型里，会更稳定。</p>
<p><img src="img/1d7e13d9f7334aecbcdf74ce63dafd60.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/KLjgbOfAhobDNMxqb1zcvBppneg/"/></p>
<p><img src="img/33cc9b7102bd08f7680663356c060613.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/JuPLba3TrofRsKxtdfsckWNMnGe/"/></p>

<p>在“输入”里，点那个设置按钮，选择开始节点，选择我们刚才输入的input，表示大模型接受的信息是从开始节点的input来的</p>
<p><img src="img/8a22b1d65a373db1a7c1d3e076b71ad8.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Fg02btSUBoZnHqxEIMbcJVuqnae/"/></p>

<p>然后配置系统提示词，下面还有个用户提示词，系统提示词一般是指给大模型设置一个角色，比如医生，而用户提示词是向这个医生说明具体的病情。这里我们只要系统提示词就行。</p>
<p><img src="img/b03f5021829986fd39c29e9ed5338d1d.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/COTsbLMi2otqzXxBdMLc61tgnhf/"/></p>

<pre>系统提示词：
# 角色
你是一个擅长对联创作的人工智能助手。能够根据各种主题撰写平仄合理、对仗工整、文字优美且内容喜庆祥和的对联。

# 任务
请你根据用户输入的创作主题{{input}}创作一副对联。要求：

创作要求：
你是一个能根据特定主题创作对联的人工智能助手。所撰写的对联内容紧扣主题，平仄合理且对仗工整，上联以仄音收尾，下联以平音收尾，整体风格喜庆祥和，字数相等，结构对称，既可典雅也可通俗，富有深意，简洁有力。
1，上下联是7个字，横批是四个字。
2，在duilain字段输出对联内容，格式为：
上联：
下联：
横批：

然后请你在up输出上联文字内容，不要包含其他信息。
然后请你在down输出上联文字内容，不要包含其他信息。
然后请你在hp输出上联文字内容，不要包含其他信息。

</pre>
<p>在输出里写：</p>
<p>up： 上联</p>
<p>down：下联</p>
<p>hp：横批</p>
<p>duilian：完整对联</p>
<p><img src="img/5e295768003ea634afe21243e02ef711.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/P8VfbGGnao445cxbo2Uc7MPUnTg/"/></p>
<h2>03、输出节点</h2>


<p><img src="img/c67f2bdd1ef965b29ebaca79872e172e.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Xb40bopdsoAV0Ix9FT3cYCnwnxd/"/></p>

<p>在输出节点，点设置按钮，选择大模型，选择duilian</p>
<p><img src="img/bc61b50f5daa745c443c3b5a2ae9db43.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/VUI0bNow7oNdJGxj5YIcjvUbnib/"/></p>

<p>在输出内容里，写上提示词</p>
<p><img src="img/9f4b2729a54e295f1afaf819f81c7dfc.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/H58cbOyDMoIDLSxJEiIccqeXnhh/"/></p>


<p>提示词：</p>
<p>好的～💡</p>
<p>根据您的要求，我写了一副对子：</p>
<p>{{output}}</p>
<p>接下来给您配一张图，请稍等片刻</p>

<p>{{output}}，这个是按shift键，＋大括号，显示颜色是蓝色的才对</p>
<h2>04、画板节点</h2>
<p>然后再添加画版节点，和上一个节点连接起来，</p>
<p><img src="img/bbc16d0556402769ed305c7882001216.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/LKfTbsEsRo6aRSxLEWxc1IAVnQg/"/></p>

<p>点击画板，点击＋号，添加元素</p>
<p><img src="img/cbdc237140f55b1caecf3515f640fae8.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/DulzbgTESoa8ztxs18Qcv6YdnfD/"/></p>
<p>这里输入的变量名，要和前面写的名字一样，元素值引用大模型里内容，也要一一对应上</p>
<p><img src="img/bb358c857370bb5ae6a6a0e1cb88e688.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/AUDvblKpfoQgV9xTSCwcunnKnpb/"/></p>

<p>然后双击右侧“画板编辑”里空白处，或者点那个放大，开始编辑画板，素材给你们准备好了</p>
<p><img src="img/10a0a0762851c245e7332342987cea68.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/O0Wcb0QrnoXweJxDhC0cmVwhnEc/"/></p>

<p><img src="img/15e7c3f22502bf7d8770a509562e5224.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/X17rbmPUQog7m2xHLgjc0bzdnWc/"/></p>
<h2>画板的图片素材：</h2>
<p><img src="img/9e6a97e05318d52c7962a13b73a3254b.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/NIkdbExS2o8pR6xMTt7cqinJnmb/"/></p>
<p><img src="img/084f58c0a7e9c5607a0f2f033e30f90b.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/AZEYbwVyhoZy9AxVHwbc2fSmnJd/"/></p>
<p><img src="img/125e4f4f0957b74eb53ed1c260235b9d.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/FyhnbyRonoBxXqxhYPRcJ0Osn0d/"/></p>
<p><img src="img/b0699157d9574c158acecd5bb48a576f.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/JqhebBfRooBIWPxqZMEcH9NHnAu/"/></p>
<h2>05、结束节点</h2>
<p>最后是结束节点，选择返回文本，参数名：image，参数值引用画板节点的date</p>
<p><img src="img/c4a81cea7ac785893d3abe1dafe50d0e.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/UmPRb3SypodM8dxqWkhc1ShEnkh/"/></p>

<p><img src="img/6d88ecf08b3054aa60908bf7f4f62d60.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Ff9pbvjpuoo83uxnPZlcSAsUnig/"/></p>
<p>提示词：根据你的需求，为你生成的对联图片如下：![]{{image}}，这个Markdown语法格式，是确保直接在智能体中显示图片，不写这个格式，会只出来图片链接，需要再点击链接才能显示图片</p>
<h2>06、完成发布</h2>

<p>发布之前，一定要试运行，看看有没有报错</p>
<p><img src="img/45828790e03d37be07d714736bb917e5.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/HXdRbNxNGoJHpNx3zhncSstTnje/"/></p>

<p><img src="img/9a0d8995033e92dd63c7ac32b9331aeb.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/UkR9bkAHcoePmuxHT1Mc1ZcenCf/"/></p>
<p>右上角点击发布</p>

<p><img src="img/f748f6977ab7bbecd7ec033b0075bf98.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/GbU0bX2SaobNYfx931ecGVEEnqd/"/></p>
<p>填写版本号和版本描述</p>
<h2>07、最后</h2>
<p>编排人设与回复逻辑，下面有提示词库，可以储存你的提示词和官方的模板，自己写完提示词，还可以直接点优化,也可以再次修改智能体名字</p>
<p>根据用户输入，调用工作流 {}</p>
<p><img src="img/e4d839ae3fe34c4ac7a13373e4223b92.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/EGMSbnfWPojxCvxpkWHcatEinMg/"/></p>

<p>添加开场白，预设问题，背景图片，语音等</p>
<p><img src="img/7905f20377b95245c2b06c50241f8b1d.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/NK6bbPzLoo5DkdxeCnncmxqXn4e/"/></p>


<p><img src="img/732159894a8ce67d1bd0c5540ed7a228.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/HCnsbEyrgo99COxntu4cr8vcnYe/"/></p>

<p><img src="img/2e68b46b5cce9d1f16501ed115ee3d0b.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Cj6vbi3aPoJa90x7240c1RPunQg/"/></p>
<p>设置一个主页背景图片 可以是生成好的春联</p>
<p>发布前进行一下测试  确保正常运行</p>
<p><img src="img/efa74fcb9e7b4bffde2da1664fd98513.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/CBOVb5JIZoJX2uxZxPTcwV8gnug/"/></p>
<p>最后点击发布 发布记录可以一键生成 发布平台按需选择就行</p>

<p><img src="img/b4c346777788684b78d85934f1e1eff9.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/JfeObs5ANo1qY6xJPNgcA88InYg/"/></p>
<p>可以愉快玩耍了</p>