<h1>喂饭级教程 | Coze+飞书多维表格抓取小红书作者账号信息&amp;笔记数据</h1>
<blockquote>来源：<a href="https://uixclcu6udc.feishu.cn/docx/P4wodYFJhoshKUx0APecAzs7nDb">https://uixclcu6udc.feishu.cn/docx/P4wodYFJhoshKUx0APecAzs7nDb</a></blockquote>
<p>大家好，我是乔今，目前在研究AI提效和私域获客方向。这是我的第3篇文章《AI工作流 | Coze+飞书多维表格抓取小红书作者账号信息及笔记数据》。</p>
<p>对运营稍微了解一点，就会知道分析对标作者账号信息和笔记数据的重要性。踩着巨人的肩膀，搭顺风车，省时省力。</p>
<p>对着对标账号看笔记，看到后面忘了前面。想下载下来，一篇篇扒，手都抽筋了，回头找的时候照样麻爪。</p>
<p>本篇文章就是用来“减负”的！手把手教你怎样输入作者主页网址，直接将作者账号信息、笔记数据自动上传到飞书多维表格，后续不论是拆解选题方向、内容结构、表达方式以及互动策略，或者仿写，都可以在表格中一站式搞定。省下来的时间打场游戏，摸摸鱼，简直不要太开心~</p>

<p>工作流如下所示：</p>
<p><img src="img/d0b9a0e0d244ea048ebf77ff68c472d8.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/VgAebySkcoJmBvxN0nRcCWJOnvf/"/></p>
<p>运行结果：</p>
<p>账号数据：</p>
<p><img src="img/22c456e2189690eb299c0fc987f9cf63.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/WSdOb4y2JoUsADxvQnmctDKtnNe/"/></p>
<p>笔记数据：</p>
<p><img src="img/98697e46e63b694b6cce98c2ca6cb3a4.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/HpOnbUlIroUozyxhLJ8cMilonhd/"/></p>

<p>本篇文档分为三个部分：</p>
<ol><li>思路拆解</li></ol>
<ol><li>实操步骤</li></ol>
<ol><li>源码与使用教程（不想自己按步骤搭，可直接看这一部分）</li></ol>
<ol><li>复盘总结</li></ol>

<h2>1 思路拆解</h2>
<ol><li>创建飞书多维表格，总共有两个数据表，一个用来存储作者主页账号信息，一个用来存储作者笔记信息</li></ol>
<ol><li>输入小红书作者主页链接、小红书cookie、飞书两个表格的链接</li></ol>
<ol><li>代码处理抓取结果，与飞书多维表格输入对齐</li></ol>
<ol><li>抓取小红书作者主页账号信息，存储到飞书中</li></ol>
<ol><li>抓取小红书作者笔记信息，存储到飞书中</li></ol>

<h2>2 实操步骤</h2>
<h3>2.1 创建飞书多维表格</h3>
<p>1、登录飞书网址=》新建=》多维表格=》新建多维表格</p>
<p><img src="img/603f9847f5499596a147958d88a500a6.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/V2gpbs1deo6miGxzrLXcNvOenzb/"/></p>
<p><img src="img/fa08211cb1f946a5ee02e46b50c0a723.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/CBp0bkQwJocyYixtYCecOpyYnJc/"/></p>
<p>2、新建数据表即可创建新表。鼠标右键可以修改表名。</p>
<p><img src="img/e82c41dc07fa626ffb720ac39742e6a1.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/JLT2bsllmouINIx9qoucVPnFnC9/"/></p>
<p>3、本文涉及到两个表格，“账号数据”用来存储作者的账号信息，“笔记数据”用来存储作者的每篇笔记数据。</p>
<p><img src="img/8fef9b91874d007e849f5fb97fb9bd28.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/YZY3bDkeHo0SaxxcF8WceNBjnxg/"/></p>
<p>4、“账号数据”表：鼠标左键选中，右键删除后续几列</p>
<p><img src="img/d7e47cb0937ece5abd6bc4d352b1aada.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/WcRAbX3hzoRvPOxQnvpcRaRvnkq/"/></p>
<p>5、修改列名。鼠标右键，“编辑字段和列”。首行设置如下几列，注意文字不要写错，和后续代码名称保持一致。否则数据无法写入飞书。注意类型都是文本。</p>
<p><img src="img/84feab24bd6901df97d47e1a82c3fe22.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/MLSAbFp3CotCV2x094jc71iQnkq/"/></p>
<p><img src="img/4ff8fa410361e08b2fb37668aaf62897.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/U6yUbMkzcosF7OxQ3TPcgz6DnTc/"/></p>
<p>6、左上角选中，删除记录，不然会从最后一行开始插入数据。</p>
<p><img src="img/417612fe712b13426ad9d199c3cd1b9a.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/GVWbbnmiBoMdTXxD5VucIQBunnk/"/></p>
<p>7、设置权限：</p>
<p><img src="img/c7c11b4449767fc23f7926f6e75a5853.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/RXwrbVbMfo6FH5xoQCtcNdBYnxf/"/></p>
<p>8、这个链接就是下述开始节点中的FeishuToken</p>
<p><img src="img/63623dc8882a14a21eb59c25cb9b3a85.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Me2kbFmAKoahpcxB14WczfEinHc/"/></p>
<p>9、“笔记数据”设置如下图所示，注意绿框内的字段为文字类型，黄框是链接转附件，可以将url转为图片显示，直接下图搜索框搜索即可：</p>
<p><img src="img/58851ac5fab03c0005710e8ace6dbc61.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/L5eQb8jI9oNddUx4RvRc5zRonfe/"/></p>
<p><img src="img/f8437aef699862d1de7f81cb0f192b32.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/WKl9bwsHAoIdHbxzQQjcHNdSnJc/"/></p>
<p><img src="img/cae2a8a22c85e7cf0a4fc9f8b6e9b779.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/LYeFbWbIxo2Iz9xCWDdc3NjEncb/"/></p>
<p><img src="img/b656701027af5d5d7a940189c8f156ab.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/VZbRbI6k1oe2BLxihimc9Hwen8M/"/></p>
<p><img src="img/2a9bc387d6f3fef5fa44aea00c736b1f.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/OxCIbL6S4oS2ABxkNcqcaKGfnch/"/></p>
<h3>2.2 创建工作流</h3>
<p>登录扣子网站=》开发平台=》快速开始=》工作空间(左侧菜单栏) =》资源库=》+资源(右侧最上角)=》工作流 =》填写工作流名称和工作流描述</p>
<p><img src="img/419a684c2fba08601ec85e2c44fe962c.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/TO6wb0VcqoiFIuxu0fTcT7lZnyg/"/></p>
<p><img src="img/8e9f0679c228b6b5073267e12f8bf8fb.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/TZ5gbTcKUorf9sx7YCOc5Qqcndd/"/></p>
<p>这里工作流名称设置为：XHSAuthCrawlerCookie</p>
<p>工作流描述设置为：</p>
<p>:::warning</p>
<p>输入小红书笔记链接、小红书Cookie、飞书多维表格链接，抓取小红书博主的所有笔记数据</p>
<p>:::</p>
<p><img src="img/14f4cdd9e372803e0592ce753b1a4b8d.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Y60gbR5GYo2aw8x4Cpkcs2sAnK0/"/></p>
<h3>2.3 如何添加节点？</h3>
<p>1、添加节点=》插件</p>
<p><img src="img/72678358e6c95ae5e9b6cf3d1dbf204c.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Pmh9bzjoOobfMoxA6eScye05nKh/"/></p>
<p>2、搜索名称，得到的一般都是合集。小红书插件合集搜索示例：</p>
<p><img src="img/ce3fd4cdc6ff664489d9a23715fe0477.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Xf4UbgRwioEmXLxRaq4csYQyn4c/"/></p>

<p>3、收藏后，点击添加节点，即可看到已收藏的插件，下次用不需要在插件商店重复搜索了</p>
<p><img src="img/cfedf399c2993ad91dc9adad9a5351e7.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/PHl8bEr24onzMCxwjD2cGgWDnzb/"/></p>
<p><img src="img/3c689b55537f55a859c63c59211c2fc7.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/SJiKbAtwDo6udexOl0Oc9hSGn9f/"/></p>

<h3>2.4 开始节点</h3>
<p>设置如下：</p>
<p><img src="img/ad394ad24a2a7c6379c46aec8bc681eb.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/AwZFbUiwEo6Q5SxoaNhcXkrennd/"/></p>
<ol><li>RedBookAuthUrl：小红书作者主页链接</li></ol>
<ol><li>RedBookCookie：小红书cookie</li></ol>
<ol><li>FeishuAccountToken：飞书多维表格“账号数据”token</li></ol>
<ol><li>FeishuNoteToken：飞书多维表格“笔记数据”token</li></ol>
<h3>2.5 小红书作者数据抓取插件</h3>
<p>设置如下：</p>
<p><img src="img/59f249f2dd7edf7f14893201cf3ee93c.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/ZzMNb995uovDvcxmJz2clv2ynqd/"/></p>
<p>1、cookieStr：</p>
<p><img src="img/4e181b75879a2dba09c869441acfe0f0.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/V0pHbqPa7oPvjSxvYi2cuFjvnZd/"/></p>
<p>2、userProfileUrl</p>
<p><img src="img/7725f44cf66c555849e755c10bb69903.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/MbKRbkcnmo5XVKxtczicV5TTnKX/"/></p>
<h3>2.6 代码节点</h3>
<p>设置如下：</p>
<p><img src="img/ee0eb00e3a724442b1424e0bc513dcb9.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/UAifbjAadonUNYxJ1Bfcg70xnsb/"/></p>
<p>输入：input</p>
<p><img src="img/eddae84ec863a2e5824621cee9fdcfb1.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/MxLdbVkliocXTsxL2BScZMIbnxg/"/></p>
<p>输出：info</p>
<p><img src="img/69338506242f8f36298309c0cd9bafb4.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Uzx8bZYwtoANILxnkVAcEcv5nyh/"/></p>
<p>代码如下：切换为python</p>
<p><img src="img/ed9a57177ab295e8dc379aac567b6b0a.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/VNvGbGVHPo8sBnxP2tYc28UonQh/"/></p>

<pre>async def main(args: Args) -&gt; Output:
    params = args.params
    params = params['input']

    # 构建输出对象
    records = []

    fields = {
        "博主昵称": params["nick_name"],
        "头像链接": params["avatar"],
        "简介": params["desc"],
        "粉丝数": params["fans"],
        "关注数": params["follows"],
        "赞藏数": params["interaction"],
        "IP地址": params["ip_location"],
        "博主id": params["red_id"],
        "主页链接": params["user_link_url"]
    }

    # 将 fields 转换为 JSON 格式的字符串
    record = {"fields": json.dumps(fields, ensure_ascii=False)}
    records.append(record)

    # 构建最终返回的输出对象
    ret = {
        "info": records
    }

    return ret</pre>
<h3>2.7 多维表格添加数据节点</h3>
<p>添加插件：</p>
<p><img src="img/c11487949412e07f36542f48e86b9c0d.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/N1igbQw21oZ2LbxXVwJcZRIDnyf/"/></p>
<p>设置如下：</p>
<p><img src="img/1bb87aae5aacb3315b06ad047487e06e.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/QYrqbHPrToVryMxX3NNcfQETnGX/"/></p>
<p>1、app_token</p>
<p><img src="img/0f1235e134fdc8f8247d18a3ee523309.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/TQKXb3bTNolxUhxdGyscESawnsc/"/></p>
<p>2、records</p>
<p><img src="img/2107fa7ea8061e4935c511170c396c6c.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/A6jrbkL3qoD5yvxAQWhcNWU4nKe/"/></p>
<h3>2.8 循环节点</h3>
<p>设置如下：</p>
<p><img src="img/9aa588a5bfd334c2dcb8487251263c32.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/WwLgbwNmhooVVRxK4udc58KHnWl/"/></p>
<p>1、循环设置：使用数组循环</p>
<p>2、循环数组：input</p>
<p><img src="img/5efd9bd62f3989747b7b38754ba814c4.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/QPrbb4llnolpLPxigxmcZO4Znqc/"/></p>
<p>3、输出：output</p>
<p><img src="img/3510d74faadf305b6a7b4547cc7ae064.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/UitGbt80AoMggoxpdgrcMLERngc/"/></p>
<h4>2.8.1 小红书笔记抓取插件</h4>
<p>设置如下：</p>
<p><img src="img/78ec8fef174b9ef8b433219c099a7b81.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/EfBpbs3zFoijdNxR3xpcWBE7nCf/"/></p>
<p>1、cookieStr</p>
<p><img src="img/3c5e2294870d54e33a653b79097b638d.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/KHxDbh6AKoVYV0xnTOpcwnognHg/"/></p>
<p>2、noteUrl</p>
<p><img src="img/1211382a02863495a2569f8e696b6041.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/DhqHb7GTvo7qOwxvRVdc9sVsnEh/"/></p>
<h4>2.8.2 代码1</h4>
<p>设置如下：</p>
<p><img src="img/7c0d723421bb5bc7033d9d28a2784e05.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/LV4qb7Bs6o8psXxHyQVcwZpbnhf/"/></p>
<p>输入：input</p>
<p><img src="img/da178f4410923bdc4fc43105756a0d76.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Ht15bqw9EovBMbxGyPZcxUyBnLh/"/></p>
<p>输出：info</p>
<p><img src="img/d781f1e3437dfdb94bab37ceecc5c90e.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/PEoFbDoJ6oH9FuxRHKicwhN1n7G/"/></p>
<p>代码如下：python</p>
<pre>async def main(args: Args) -&gt; Output:
    params = args.params
    params = params["input"]
    # 构建输出对象
    records = []

    fields = {
            "标题": params["note_display_title"],
            "创建时间": params["note_create_time"],
            "封面图片链接": params["note_image_list"][0],
            "博主昵称": params["auther_nick_name"],
            "文案": params["note_desc"],
            "标签": "||".join(params["note_tags"]),
            "类型": params["note_card_type"],
            "收藏数": int(params["collected_count"]),
            "点赞数": int(params["note_liked_count"]),
            "分享数": int(params["share_count"]),
            "评论数": int(params["comment_count"]),
            "视频链接": params["video_h264_url"],
            "笔记链接": params["note_url"],
            "图片列表": "||".join(params["note_image_list"])
        }

    # 将 fields 转换为 JSON 格式的字符串
    record = {"fields": json.dumps(fields, ensure_ascii=False)}
    records.append(record)

    # 构建最终返回的输出对象
    ret = {
        "info": records
    }

    return ret</pre>
<h4>2.8.3 多维表格添加数据节点</h4>
<p>设置如下：</p>
<p><img src="img/f7e38dcbc3d3a956fd6d20fea97c6d4f.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/HTYObqGwRoUdKJxAblGcH5w7npg/"/></p>
<p>1、app_token</p>
<p><img src="img/b4bf687eb58e7b9b907d64074423fde9.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/YP2XbZu4HoGFF3xhoDAcKIVRnaf/"/></p>
<p>2、records</p>
<p><img src="img/c522aba20529cdf5de1872b8ca51cd99.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/RDribZs1CoiCSpxUHgDcTQY1n8g/"/></p>
<h3>2.9 结束节点</h3>
<p>设置如下：</p>
<p><img src="img/fe74092b72bcd405784ce038445feb52.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/CHxFbRCutoska9xnN0EcPkBcnjg/"/></p>
<p>output：</p>
<p><img src="img/2f58ed85add83dfaf0aa52e190b2f46a.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/JpqZbYHHKouP8qxD68ecpdUgnBg/"/></p>
<h3>2.10 小红书cookie获取方法</h3>
<p><img src="img/132b6d337cc53a4685a8aeb7cf31735e.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/LfmkbXXIUoJomox101acrn7dndf/"/></p>

<p>2、随意搜索一个内容</p>
<p><img src="img/22053823a27c63a65121e5c655292aab.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/QXBlbmTaQo43bqxtFxkcjX1OnGg/"/></p>

<p>3、鼠标右键，点击检查。或者按一下键盘上的F12也可以</p>
<p><img src="img/3b8bb3859c9265b9690a02c7a58504f1.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/PxsZblsgzolLp9xwLf2ckVKUnDc/"/></p>

<p>4、点击Network</p>
<p><img src="img/5aef0295308eba9cbeb3627b971fef83.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/HkQtb0ZtMoRepExVOY9cpyipn2S/"/></p>

<p>5、鼠标在左侧小红书瀑布笔记那里，鼠标滚轮一直往下滚动，可以看出Name会出现notes，点击notes，在headers那里会出现cookie，复制即可</p>

<p>4、unread_count也可以</p>
<p><img src="img/c61b09eba13c7733d8816fee6a3d75f5.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/B5F1bldE7oeWVlxF5LycZ3twn5d/"/></p>

<p>注意事项：cookie有一定的时效性，如果失效，需要重新提取。</p>

<h3>2.11 测试</h3>
<p>1、点击“试运行”</p>
<p><img src="img/9f24410baf48534f83ff82220618fbcd.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/DqDnb0L2ZoSpzDxR1nWcqr8ZnCe/"/></p>
<p>2、FeishuAccountToken</p>
<p><img src="img/97465c732fcce345906ce6bfe6e9fcd7.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/BhvobpXxxoH3qqxRRIlc2fHonob/"/></p>
<p>3、FeishuNoteToken</p>
<p><img src="img/dae983e09133bc9281e88d3a562326ee.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Kcc3bfuzwoVipsxB8z3cKtLsnLd/"/></p>
<p>4、RedBookAuthUrl，作者主页链接</p>
<p><img src="img/f56f7cb9c801c2271b8af0c8240bd494.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/DlZKb4iHSo713Qx4MbCcZ7ABnBd/"/></p>
<p>5、RedBookCookie</p>
<p><img src="img/b801d6ecac4f5db8c3be87ce0648942e.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/ZeoYbZOBMoexGKxsYueciCXdnpe/"/></p>
<p>6、填充开始节点变量值</p>
<p><img src="img/38f270d35883e0a0918f7b43c54f39f8.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/BP7WbGMF6oCJncx01osc0wQXnOe/"/></p>
<h2>3 源码与使用教程</h2>
<h3>3.1 源码</h3>

<pre>{"type":"coze-workflow-clipboard-data","source":{"workflowId":"7518229660888350760","flowMode":0,"spaceId":"7510842919100809242","isDouyin":false,"host":"www.coze.cn"},"json":{"nodes":[{"id":"177157","type":"4","meta":{"position":{"x":640,"y":13}},"data":{"nodeMeta":{"description":"‌获取用户【笔记列表】（xhs_auther_notes）‌\n‌功能描述‌： 根据提供的用户首页地址链接和小红书cookie，抓取该用户的所有笔记列表。\n‌参数‌：\ncookieStr：小红书的cookie字符串，用于身份验证。\nuserProfileUrl：用户首页的地址链接。\n","icon":"https://p26-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/b1898b6505b7472993ae37794313f9e7~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&amp;x-expires=1753068274&amp;x-signature=6d%2B4%2Fu6fA8cHjXLPLRduAj8ZVOc%3D","subtitle":"小红书:xhs_auther_notes","title":"xhs_auther_notes"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7425907757733330994","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"xhs_auther_notes","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7413268723496190002","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"小红书","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"cookieStr","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"100001","name":"RedBookCookie"},"rawMeta":{"type":1}}}},{"name":"userProfileUrl","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"100001","name":"RedBookAuthUrl"},"rawMeta":{"type":1}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"integer","name":"code","required":false},{"type":"object","name":"data","schema":[{"type":"string","name":"cursor","required":true},{"type":"boolean","name":"has_more","required":true},{"type":"list","name":"notes","schema":{"type":"object","schema":[{"type":"string","name":"auther_nick_name","required":false},{"type":"string","name":"note_cover_width","required":false},{"type":"string","name":"note_url","required":false},{"type":"string","name":"note_xsec_token","required":false},{"type":"string","name":"auther_avatar","required":false},{"type":"string","name":"auther_user_id","required":false},{"type":"string","name":"note_cover_url_pre","required":false},{"type":"string","name":"note_id","required":false},{"type":"string","name":"auther_home_page_url","required":false},{"type":"string","name":"note_display_title","required":false},{"type":"string","name":"note_liked_count","required":false},{"type":"boolean","name":"note_sticky","required":true},{"type":"string","name":"note_card_type","required":false},{"type":"string","name":"note_cover_height","required":false},{"type":"string","name":"note_cover_url_default","required":false},{"type":"boolean","name":"note_liked","required":false}]},"required":false},{"type":"object","name":"auther_info","schema":[{"type":"string","name":"gender","required":false},{"type":"string","name":"interaction","required":false},{"type":"string","name":"ip_location","required":false},{"type":"string","name":"nick_name","required":false},{"type":"string","name":"red_id","required":false},{"type":"string","name":"avatar","required":false},{"type":"string","name":"fans","required":false},{"type":"string","name":"follows","required":false},{"type":"string","name":"user_link_url","required":false},{"type":"string","name":"desc","required":false},{"type":"list","name":"tags","schema":{"type":"string"},"required":false},{"type":"string","name":"user_id","required":false}],"required":false}],"required":false},{"type":"string","name":"msg","required":false},{"type":"string","name":"tips","required":true}]},"_temp":{"bounds":{"x":460,"y":13,"width":360,"height":112},"externalData":{"icon":"https://lf6-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/517231610969187_1725264473893186047_CDXXehfYsy.png?lk3s=cd508e2b&amp;x-expires=1755150634&amp;x-signature=lDH6TRceUKnCA3RPRubURsLPU5E%3D","apiName":"xhs_auther_notes","pluginID":"7413268723496190002","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7402935100184313883","inputs":[{"description":"小红书 cookie","input":{},"name":"cookieStr","required":true,"type":"string"},{"description":"数据游标","input":{},"name":"cursor","required":false,"type":"string"},{"description":"用户首页地址链接","input":{},"name":"userProfileUrl","required":true,"type":"string"}],"outputs":[{"input":{},"name":"code","required":false,"type":"integer"},{"input":{},"name":"data","required":false,"schema":[{"input":{},"name":"notes","required":false,"schema":{"schema":[{"input":{},"name":"auther_avatar","required":false,"type":"string"},{"input":{},"name":"note_cover_url_default","required":false,"type":"string"},{"input":{},"name":"note_cover_url_pre","required":false,"type":"string"},{"input":{},"name":"note_cover_width","required":false,"type":"string"},{"input":{},"name":"note_display_title","required":false,"type":"string"},{"input":{},"name":"note_xsec_token","required":false,"type":"string"},{"input":{},"name":"auther_user_id","required":false,"type":"string"},{"input":{},"name":"note_card_type","required":false,"type":"string"},{"input":{},"name":"note_cover_height","required":false,"type":"string"},{"input":{},"name":"note_liked","required":false,"type":"boolean"},{"input":{},"name":"note_sticky","required":true,"type":"boolean"},{"input":{},"name":"note_url","required":false,"type":"string"},{"input":{},"name":"auther_home_page_url","required":false,"type":"string"},{"input":{},"name":"note_id","required":false,"type":"string"},{"input":{},"name":"note_liked_count","required":false,"type":"string"},{"input":{},"name":"auther_nick_name","required":false,"type":"string"}],"type":"object"},"type":"list"},{"input":{},"name":"auther_info","required":false,"schema":[{"input":{},"name":"gender","required":false,"type":"string"},{"input":{},"name":"tags","required":false,"schema":{"assistType":0,"type":"string"},"type":"list"},{"input":{},"name":"user_id","required":false,"type":"string"},{"input":{},"name":"user_link_url","required":false,"type":"string"},{"input":{},"name":"ip_location","required":false,"type":"string"},{"input":{},"name":"nick_name","required":false,"type":"string"},{"input":{},"name":"red_id","required":false,"type":"string"},{"input":{},"name":"avatar","required":false,"type":"string"},{"input":{},"name":"desc","required":false,"type":"string"},{"input":{},"name":"fans","required":false,"type":"string"},{"input":{},"name":"follows","required":false,"type":"string"},{"input":{},"name":"interaction","required":false,"type":"string"}],"type":"object"},{"input":{},"name":"cursor","required":true,"type":"string"},{"input":{},"name":"has_more","required":true,"type":"boolean"}],"type":"object"},{"input":{},"name":"msg","required":false,"type":"string"},{"input":{},"name":"tips","required":true,"type":"string"}],"updateTime":1752558364,"channel_id":2,"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"‌获取用户【笔记列表】（xhs_auther_notes）‌\n‌功能描述‌： 根据提供的用户首页地址链接和小红书cookie，抓取该用户的所有笔记列表。\n‌参数‌：\ncookieStr：小红书的cookie字符串，用于身份验证。\nuserProfileUrl：用户首页的地址链接。\n","title":"xhs_auther_notes","mainColor":"#CA61FF"}}},{"id":"155154","type":"5","meta":{"position":{"x":1100,"y":13}},"data":{"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","mainColor":"#00B2B2","subTitle":"代码","title":"代码"},"inputs":{"inputParameters":[{"name":"input","input":{"type":"object","schema":[{"type":"string","name":"gender","required":false},{"type":"string","name":"interaction","required":false},{"type":"string","name":"ip_location","required":false},{"type":"string","name":"nick_name","required":false},{"type":"string","name":"red_id","required":false},{"type":"string","name":"avatar","required":false},{"type":"string","name":"fans","required":false},{"type":"string","name":"follows","required":false},{"type":"string","name":"user_link_url","required":false},{"type":"string","name":"desc","required":false},{"type":"list","name":"tags","schema":{"type":"string"},"required":false},{"type":"string","name":"user_id","required":false}],"value":{"type":"ref","content":{"source":"block-output","blockID":"177157","name":"data.auther_info"},"rawMeta":{"type":6}}}}],"code":"# 在这里，您可以通过 ‘args’  获取节点中的输入变量，并通过 'ret' 输出结果\n# 'args' 和 'ret' 已经被正确地注入到环境中\n# 下面是一个示例，首先获取节点的全部输入参数params，其次获取其中参数名为‘input’的值：\n# params = args.params; \n# input = params.input;\n# 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n# ret: Output =  { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync def main(args: Args) -&gt; Output:\n    params = args.params\n    params = params['input']\n\n    # 构建输出对象\n    records = []\n\n    fields = {\n            \"博主昵称\": params[\"nick_name\"],\n            \"头像链接\": params[\"avatar\"],\n            \"简介\": params[\"desc\"],\n            \"粉丝数\": params[\"fans\"],\n            \"关注数\": params[\"follows\"],\n            \"赞藏数\": params[\"interaction\"],\n            \"IP地址\": params[\"ip_location\"],\n            \"博主id\": params[\"red_id\"],\n            \"主页链接\": params[\"user_link_url\"]\n        }\n\n    # 将 fields 转换为 JSON 格式的字符串\n    record = {\"fields\": json.dumps(fields, ensure_ascii=False)}\n    records.append(record)\n\n    # 构建最终返回的输出对象\n    ret = {\n        \"info\": records\n    }\n\n    return ret","language":3,"settingOnError":{"processType":1,"timeoutMs":60000,"retryTimes":0}},"outputs":[{"type":"list","name":"info","schema":{"type":"object","schema":[]}}]},"_temp":{"bounds":{"x":920,"y":13,"width":360,"height":112},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","description":"编写代码，处理输入变量来生成返回值","title":"代码","mainColor":"#00B2B2"}}},{"id":"161588","type":"4","meta":{"position":{"x":1560,"y":13}},"data":{"nodeMeta":{"description":"在多维表格数据表中新增多条记录，单次调用最多新增 500 条记录。","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/dfc3d7f4eb004d0584aaf47a510beba2~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&amp;x-expires=1753069237&amp;x-signature=Vp77knPs%2Bxpvy541HXnkdnxXj20%3D","subtitle":"飞书多维表格:add_records","title":"add_records_账号数据"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7395047759797288987","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_records","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7395047759797272603","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"飞书多维表格","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"},{"input":{"type":"integer","value":{"content":0,"type":"literal"}},"name":"pluginAuthMode"}],"inputParameters":[{"name":"app_token","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"100001","name":"FeishuAccountToken"},"rawMeta":{"type":1}}}},{"name":"records","input":{"type":"list","schema":{"type":"object","schema":[]},"value":{"type":"ref","content":{"source":"block-output","blockID":"155154","name":"info"},"rawMeta":{"type":103}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"float","name":"code","required":false,"description":"错误码，非 0 表示失败。"},{"type":"object","name":"data","schema":[{"type":"list","name":"records","schema":{"type":"object","schema":[{"type":"string","name":"fields","required":false,"description":"数据表的字段，即数据表的列，格式为 json 字符串。"},{"type":"string","name":"record_id","required":false,"description":"一条记录的唯一标识 id"}]},"required":false,"description":"本次请求新增的记录列表"}],"required":false,"description":"返回结果"},{"type":"string","name":"log_id","required":false,"description":"链路追踪 id"},{"type":"string","name":"msg","required":false,"description":"错误描述"}]},"_temp":{"bounds":{"x":1380,"y":13,"width":360,"height":112},"externalData":{"icon":"https://lf9-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/618387578815144_1720635554144262143_tbFVbqTqbp.png?lk3s=cd508e2b&amp;x-expires=1755150634&amp;x-signature=kKr8JlRZVPPlIqTty2FdGqqx4bA%3D","apiName":"add_records","pluginID":"7395047759797272603","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7315016311652941851","inputs":[{"description":"多维表格数据表的唯一标识符","input":{},"name":"table_id","required":false,"type":"string"},{"description":"多维表格数据表的名称","input":{},"name":"table_name","required":false,"type":"string"},{"defaultValue":"open_id","description":"用户 ID 类型，可选值有 open_id、union_id、user_id，默认值为 open_id。, default value is open_id","input":{},"name":"user_id_type","required":false,"type":"string"},{"description":"多维表格的唯一标识符，支持输入文档 url。","input":{},"name":"app_token","required":true,"type":"string"},{"description":"本次请求将要新增的记录列表，格式为：[{\"fields\":{\"文本\":\"文本内容\",\"单选\":\"选项 1\",\"日期\":1674206443000}}]","input":{},"name":"records","required":true,"schema":{"schema":[{"description":"数据表的字段，即数据表的列，格式为 json 字符串。例如：{\"文本\":\"文本内容\",\"单选\":\"选项 1\",\"日期\":1674206443000}","input":{},"name":"fields","required":true,"type":"string"}],"type":"object"},"type":"list"}],"outputs":[{"description":"错误码，非 0 表示失败。","input":{},"name":"code","required":false,"type":"float"},{"description":"返回结果","input":{},"name":"data","required":false,"schema":[{"description":"本次请求新增的记录列表","input":{},"name":"records","required":false,"schema":{"schema":[{"description":"数据表的字段，即数据表的列，格式为 json 字符串。","input":{},"name":"fields","required":false,"type":"string"},{"description":"一条记录的唯一标识 id","input":{},"name":"record_id","required":false,"type":"string"}],"type":"object"},"type":"list"}],"type":"object"},{"description":"链路追踪 id","input":{},"name":"log_id","required":false,"type":"string"},{"description":"错误描述","input":{},"name":"msg","required":false,"type":"string"}],"updateTime":1752558245,"channel_id":2,"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"在多维表格数据表中新增多条记录，单次调用最多新增 500 条记录。","title":"add_records","mainColor":"#CA61FF"}}},{"id":"148068","type":"21","meta":{"position":{"x":2580,"y":0},"canvasPosition":{"x":1940,"y":318}},"data":{"inputs":{"inputParameters":[{"name":"input","input":{"type":"list","schema":{"type":"object","schema":[{"type":"string","name":"auther_nick_name","required":false},{"type":"string","name":"note_cover_width","required":false},{"type":"string","name":"note_url","required":false},{"type":"string","name":"note_xsec_token","required":false},{"type":"string","name":"auther_avatar","required":false},{"type":"string","name":"auther_user_id","required":false},{"type":"string","name":"note_cover_url_pre","required":false},{"type":"string","name":"note_id","required":false},{"type":"string","name":"auther_home_page_url","required":false},{"type":"string","name":"note_display_title","required":false},{"type":"string","name":"note_liked_count","required":false},{"type":"boolean","name":"note_sticky","required":true},{"type":"string","name":"note_card_type","required":false},{"type":"string","name":"note_cover_height","required":false},{"type":"string","name":"note_cover_url_default","required":false},{"type":"boolean","name":"note_liked","required":false}]},"value":{"type":"ref","content":{"source":"block-output","blockID":"177157","name":"data.notes"},"rawMeta":{"type":103}}}}],"loopCount":{"type":"integer","value":{"type":"literal","content":"10"}},"loopType":"array","variableParameters":[]},"nodeMeta":{"description":"用于通过设定循环次数和逻辑，重复执行一系列任务","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Loop-v2.jpg","mainColor":"#00B2B2","subTitle":"循环","title":"循环"},"outputs":[{"name":"output","input":{"type":"list","schema":{"type":"string"},"value":{"type":"ref","content":{"source":"block-output","blockID":"154375","name":"msg"},"rawMeta":{"type":1}}}}]},"blocks":[{"id":"103111","type":"4","meta":{"position":{"x":180,"y":0}},"data":{"nodeMeta":{"description":"‌根据笔记链接获取【笔记详情】（xhs_note_detail）‌‌\n功能描述‌： 根据提供的笔记URL和cookie，抓取该笔记的详细信息。\n‌参数‌：\nnoteUrl：笔记的URL地址。\ncookieStr：小红书的cookie字符串，用于身份验证。\n","icon":"https://p3-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/b1898b6505b7472993ae37794313f9e7~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&amp;x-expires=1753070075&amp;x-signature=kO%2FyYdX2y7GXvb6Y6Fg6NHIwEQw%3D","subtitle":"小红书:xhs_note_detail","title":"xhs_note_detail"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7425907757733347378","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"xhs_note_detail","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7413268723496190002","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"小红书","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"}],"inputParameters":[{"name":"cookieStr","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"100001","name":"RedBookCookie"},"rawMeta":{"type":1}}}},{"name":"noteUrl","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"148068","name":"input.note_url"},"rawMeta":{"type":1}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"integer","name":"code","required":false},{"type":"object","name":"data","schema":[{"type":"object","name":"note","schema":[{"type":"string","name":"note_id","required":true,"description":"笔记编号"},{"type":"string","name":"auther_home_page_url","required":true,"description":"作者主页链接"},{"type":"string","name":"note_create_time","required":true,"description":"笔记创建时间"},{"type":"string","name":"note_url","required":true,"description":"笔记链接"},{"type":"string","name":"video_h265_url","required":true},{"type":"string","name":"auther_nick_name","required":true,"description":"作者昵称"},{"type":"string","name":"note_display_title","required":true,"description":"笔记标题"},{"type":"string","name":"note_last_update_time","required":true,"description":"笔记最后更新时间"},{"type":"string","name":"share_count","required":true,"description":"分享数"},{"type":"string","name":"video_a1_url","required":true},{"type":"string","name":"video_h264_url","required":true},{"type":"string","name":"video_h266_url","required":true},{"type":"string","name":"video_id","required":true},{"type":"string","name":"auther_user_id","required":true,"description":"作者ID"},{"type":"boolean","name":"collected","required":true,"description":"是否收藏"},{"type":"string","name":"collected_count","required":true,"description":"收藏数"},{"type":"string","name":"note_card_type","required":true,"description":"笔记类型"},{"type":"string","name":"note_desc","required":true,"description":"笔记描述"},{"type":"string","name":"note_duration","required":true},{"type":"string","name":"note_liked_count","required":true,"description":"点赞数"},{"type":"list","name":"note_tags","schema":{"type":"string"},"required":true,"description":"笔记标签列表"},{"type":"string","name":"auther_avatar","required":true,"description":"作者头像"},{"type":"string","name":"comment_count","required":true,"description":"评论数"},{"type":"list","name":"note_image_list","schema":{"type":"string"},"required":true,"description":"笔记封面"},{"type":"boolean","name":"note_liked","required":true,"description":"是否点赞"},{"type":"string","name":"note_model_type","required":true,"description":"笔记模型类型"}],"required":false,"description":"笔记信息"}],"required":false},{"type":"string","name":"msg","required":true},{"type":"string","name":"tips","required":true}]},"_temp":{"bounds":{"x":1940,"y":318,"width":360,"height":112},"externalData":{"icon":"https://lf26-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/517231610969187_1725264473893186047_CDXXehfYsy.png?lk3s=cd508e2b&amp;x-expires=1755150634&amp;x-signature=x%2BTgrZut%2Fs6I8U6oK7pKeEC%2B4%2BY%3D","apiName":"xhs_note_detail","pluginID":"7413268723496190002","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7402935100184313883","inputs":[{"description":"cookie","input":{},"name":"cookieStr","required":true,"type":"string"},{"description":" 笔记链接","input":{},"name":"noteUrl","required":true,"type":"string"}],"outputs":[{"input":{},"name":"code","required":false,"type":"integer"},{"input":{},"name":"data","required":false,"schema":[{"description":"笔记信息","input":{},"name":"note","required":false,"schema":[{"description":"评论数","input":{},"name":"comment_count","required":true,"type":"string"},{"description":"笔记描述","input":{},"name":"note_desc","required":true,"type":"string"},{"description":"笔记最后更新时间","input":{},"name":"note_last_update_time","required":true,"type":"string"},{"description":"点赞数","input":{},"name":"note_liked_count","required":true,"type":"string"},{"description":"笔记链接","input":{},"name":"note_url","required":true,"type":"string"},{"description":"作者头像","input":{},"name":"auther_avatar","required":true,"type":"string"},{"description":"作者昵称","input":{},"name":"auther_nick_name","required":true,"type":"string"},{"description":"作者ID","input":{},"name":"auther_user_id","required":true,"type":"string"},{"input":{},"name":"video_h264_url","required":true,"type":"string"},{"description":"笔记封面","input":{},"name":"note_image_list","required":true,"schema":{"assistType":0,"type":"string"},"type":"list"},{"description":"笔记模型类型","input":{},"name":"note_model_type","required":true,"type":"string"},{"description":"分享数","input":{},"name":"share_count","required":true,"type":"string"},{"description":"是否点赞","input":{},"name":"note_liked","required":true,"type":"boolean"},{"input":{},"name":"video_a1_url","required":true,"type":"string"},{"input":{},"name":"video_id","required":true,"type":"string"},{"description":"是否收藏","input":{},"name":"collected","required":true,"type":"boolean"},{"description":"笔记创建时间","input":{},"name":"note_create_time","required":true,"type":"string"},{"input":{},"name":"note_duration","required":true,"type":"string"},{"description":"笔记标题","input":{},"name":"note_display_title","required":true,"type":"string"},{"description":"笔记编号","input":{},"name":"note_id","required":true,"type":"string"},{"description":"笔记标签列表","input":{},"name":"note_tags","required":true,"schema":{"assistType":0,"type":"string"},"type":"list"},{"input":{},"name":"video_h265_url","required":true,"type":"string"},{"input":{},"name":"video_h266_url","required":true,"type":"string"},{"description":"作者主页链接","input":{},"name":"auther_home_page_url","required":true,"type":"string"},{"description":"收藏数","input":{},"name":"collected_count","required":true,"type":"string"},{"description":"笔记类型","input":{},"name":"note_card_type","required":true,"type":"string"}],"type":"object"}],"type":"object"},{"input":{},"name":"msg","required":true,"type":"string"},{"input":{},"name":"tips","required":true,"type":"string"}],"updateTime":1752558364,"channel_id":2,"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"‌根据笔记链接获取【笔记详情】（xhs_note_detail）‌‌\n功能描述‌： 根据提供的笔记URL和cookie，抓取该笔记的详细信息。\n‌参数‌：\nnoteUrl：笔记的URL地址。\ncookieStr：小红书的cookie字符串，用于身份验证。\n","title":"xhs_note_detail","mainColor":"#CA61FF"}}},{"id":"121886","type":"5","meta":{"position":{"x":640,"y":0}},"data":{"nodeMeta":{"description":"编写代码，处理输入变量来生成返回值","icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","mainColor":"#00B2B2","subTitle":"代码","title":"代码_1"},"inputs":{"inputParameters":[{"name":"input","input":{"type":"object","schema":[{"type":"string","name":"note_id","required":true,"description":"笔记编号"},{"type":"string","name":"auther_home_page_url","required":true,"description":"作者主页链接"},{"type":"string","name":"note_create_time","required":true,"description":"笔记创建时间"},{"type":"string","name":"note_url","required":true,"description":"笔记链接"},{"type":"string","name":"video_h265_url","required":true},{"type":"string","name":"auther_nick_name","required":true,"description":"作者昵称"},{"type":"string","name":"note_display_title","required":true,"description":"笔记标题"},{"type":"string","name":"note_last_update_time","required":true,"description":"笔记最后更新时间"},{"type":"string","name":"share_count","required":true,"description":"分享数"},{"type":"string","name":"video_a1_url","required":true},{"type":"string","name":"video_h264_url","required":true},{"type":"string","name":"video_h266_url","required":true},{"type":"string","name":"video_id","required":true},{"type":"string","name":"auther_user_id","required":true,"description":"作者ID"},{"type":"boolean","name":"collected","required":true,"description":"是否收藏"},{"type":"string","name":"collected_count","required":true,"description":"收藏数"},{"type":"string","name":"note_card_type","required":true,"description":"笔记类型"},{"type":"string","name":"note_desc","required":true,"description":"笔记描述"},{"type":"string","name":"note_duration","required":true},{"type":"string","name":"note_liked_count","required":true,"description":"点赞数"},{"type":"list","name":"note_tags","schema":{"type":"string"},"required":true,"description":"笔记标签列表"},{"type":"string","name":"auther_avatar","required":true,"description":"作者头像"},{"type":"string","name":"comment_count","required":true,"description":"评论数"},{"type":"list","name":"note_image_list","schema":{"type":"string"},"required":true,"description":"笔记封面"},{"type":"boolean","name":"note_liked","required":true,"description":"是否点赞"},{"type":"string","name":"note_model_type","required":true,"description":"笔记模型类型"}],"value":{"type":"ref","content":{"source":"block-output","blockID":"103111","name":"data.note"},"rawMeta":{"type":6}}}}],"code":"# 在这里，您可以通过 ‘args’  获取节点中的输入变量，并通过 'ret' 输出结果\n# 'args' 和 'ret' 已经被正确地注入到环境中\n# 下面是一个示例，首先获取节点的全部输入参数params，其次获取其中参数名为‘input’的值：\n# params = args.params; \n# input = params.input;\n# 下面是一个示例，输出一个包含多种数据类型的 'ret' 对象：\n# ret: Output =  { \"name\": ‘小明’, \"hobbies\": [“看书”, “旅游”] };\n\nasync def main(args: Args) -&gt; Output:\n    params = args.params\n    params = params[\"input\"]\n    # 构建输出对象\n    records = []\n\n    fields = {\n            \"标题\": params[\"note_display_title\"],\n            \"创建时间\": params[\"note_create_time\"],\n            \"封面图片链接\": params[\"note_image_list\"][0],\n            \"博主昵称\": params[\"auther_nick_name\"],\n            \"文案\": params[\"note_desc\"],\n            \"标签\": \"||\".join(params[\"note_tags\"]),\n            \"类型\": params[\"note_card_type\"],\n            \"收藏数\": int(params[\"collected_count\"]),\n            \"点赞数\": int(params[\"note_liked_count\"]),\n            \"分享数\": int(params[\"share_count\"]),\n            \"评论数\": int(params[\"comment_count\"]),\n            \"视频链接\": params[\"video_h264_url\"],\n            \"笔记链接\": params[\"note_url\"],\n            \"图片列表\": \"||\".join(params[\"note_image_list\"])\n        }\n\n    # 将 fields 转换为 JSON 格式的字符串\n    record = {\"fields\": json.dumps(fields, ensure_ascii=False)}\n    records.append(record)\n\n    # 构建最终返回的输出对象\n    ret = {\n        \"info\": records\n    }\n\n    return ret","language":3,"settingOnError":{"processType":1,"timeoutMs":60000,"retryTimes":0}},"outputs":[{"type":"list","name":"info","schema":{"type":"object","schema":[]}}]},"_temp":{"bounds":{"x":2400,"y":318,"width":360,"height":112},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Code-v2.jpg","description":"编写代码，处理输入变量来生成返回值","title":"代码","mainColor":"#00B2B2"}}},{"id":"154375","type":"4","meta":{"position":{"x":1100,"y":0}},"data":{"nodeMeta":{"description":"在多维表格数据表中新增多条记录，单次调用最多新增 500 条记录。","icon":"https://p6-flow-product-sign.byteimg.com/tos-cn-i-13w3uml6bg/dfc3d7f4eb004d0584aaf47a510beba2~tplv-13w3uml6bg-resize:128:128.image?rk3s=2e2596fd&amp;x-expires=1753069237&amp;x-signature=Vp77knPs%2Bxpvy541HXnkdnxXj20%3D","subtitle":"飞书多维表格:add_records","title":"add_records"},"inputs":{"apiParam":[{"input":{"type":"string","value":{"content":"7395047759797288987","rawMeta":{"type":1},"type":"literal"}},"name":"apiID"},{"input":{"type":"string","value":{"content":"add_records","rawMeta":{"type":1},"type":"literal"}},"name":"apiName"},{"input":{"type":"string","value":{"content":"7395047759797272603","rawMeta":{"type":1},"type":"literal"}},"name":"pluginID"},{"input":{"type":"string","value":{"content":"飞书多维表格","rawMeta":{"type":1},"type":"literal"}},"name":"pluginName"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"pluginVersion"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"tips"},{"input":{"type":"string","value":{"content":"","rawMeta":{"type":1},"type":"literal"}},"name":"outDocLink"},{"input":{"type":"integer","value":{"content":0,"type":"literal"}},"name":"pluginAuthMode"}],"inputParameters":[{"name":"app_token","input":{"type":"string","value":{"type":"ref","content":{"source":"block-output","blockID":"100001","name":"FeishuNoteToken"},"rawMeta":{"type":1}}}},{"name":"records","input":{"type":"list","schema":{"type":"object","schema":[]},"value":{"type":"ref","content":{"source":"block-output","blockID":"121886","name":"info"},"rawMeta":{"type":103}}}}],"settingOnError":{"processType":1,"timeoutMs":180000,"retryTimes":0}},"outputs":[{"type":"float","name":"code","required":false,"description":"错误码，非 0 表示失败。"},{"type":"object","name":"data","schema":[{"type":"list","name":"records","schema":{"type":"object","schema":[{"type":"string","name":"fields","required":false,"description":"数据表的字段，即数据表的列，格式为 json 字符串。"},{"type":"string","name":"record_id","required":false,"description":"一条记录的唯一标识 id"}]},"required":false,"description":"本次请求新增的记录列表"}],"required":false,"description":"返回结果"},{"type":"string","name":"log_id","required":false,"description":"链路追踪 id"},{"type":"string","name":"msg","required":false,"description":"错误描述"}]},"_temp":{"bounds":{"x":2860,"y":318,"width":360,"height":112},"externalData":{"icon":"https://lf9-appstore-sign.oceancloudapi.com/ocean-cloud-tos/plugin_icon/618387578815144_1720635554144262143_tbFVbqTqbp.png?lk3s=cd508e2b&amp;x-expires=1755150634&amp;x-signature=kKr8JlRZVPPlIqTty2FdGqqx4bA%3D","apiName":"add_records","pluginID":"7395047759797272603","pluginProductStatus":1,"pluginProductUnlistType":0,"pluginType":1,"spaceID":"7315016311652941851","inputs":[{"description":"多维表格数据表的唯一标识符","input":{},"name":"table_id","required":false,"type":"string"},{"description":"多维表格数据表的名称","input":{},"name":"table_name","required":false,"type":"string"},{"defaultValue":"open_id","description":"用户 ID 类型，可选值有 open_id、union_id、user_id，默认值为 open_id。, default value is open_id","input":{},"name":"user_id_type","required":false,"type":"string"},{"description":"多维表格的唯一标识符，支持输入文档 url。","input":{},"name":"app_token","required":true,"type":"string"},{"description":"本次请求将要新增的记录列表，格式为：[{\"fields\":{\"文本\":\"文本内容\",\"单选\":\"选项 1\",\"日期\":1674206443000}}]","input":{},"name":"records","required":true,"schema":{"schema":[{"description":"数据表的字段，即数据表的列，格式为 json 字符串。例如：{\"文本\":\"文本内容\",\"单选\":\"选项 1\",\"日期\":1674206443000}","input":{},"name":"fields","required":true,"type":"string"}],"type":"object"},"type":"list"}],"outputs":[{"description":"错误码，非 0 表示失败。","input":{},"name":"code","required":false,"type":"float"},{"description":"返回结果","input":{},"name":"data","required":false,"schema":[{"description":"本次请求新增的记录列表","input":{},"name":"records","required":false,"schema":{"schema":[{"description":"数据表的字段，即数据表的列，格式为 json 字符串。","input":{},"name":"fields","required":false,"type":"string"},{"description":"一条记录的唯一标识 id","input":{},"name":"record_id","required":false,"type":"string"}],"type":"object"},"type":"list"}],"type":"object"},{"description":"链路追踪 id","input":{},"name":"log_id","required":false,"type":"string"},{"description":"错误描述","input":{},"name":"msg","required":false,"type":"string"}],"updateTime":1752558245,"channel_id":2,"latestVersionTs":"0","latestVersionName":"","versionName":"","description":"在多维表格数据表中新增多条记录，单次调用最多新增 500 条记录。","title":"add_records","mainColor":"#CA61FF"}}}],"edges":[{"sourceNodeID":"148068","targetNodeID":"103111","sourcePortID":"loop-function-inline-output"},{"sourceNodeID":"103111","targetNodeID":"121886"},{"sourceNodeID":"121886","targetNodeID":"154375"},{"sourceNodeID":"154375","targetNodeID":"148068","targetPortID":"loop-function-inline-input"}],"_temp":{"bounds":{"x":2400,"y":0,"width":360,"height":138},"externalData":{"icon":"https://lf3-static.bytednsdoc.com/obj/eden-cn/dvsmryvd_avi_dvsm/ljhwZthlaukjlkulzlp/icon/icon-Loop-v2.jpg","description":"用于通过设定循环次数和逻辑，重复执行一系列任务","title":"循环","mainColor":"#00B2B2"}}}],"edges":[{"sourceNodeID":"177157","targetNodeID":"155154"},{"sourceNodeID":"155154","targetNodeID":"161588"},{"sourceNodeID":"161588","targetNodeID":"148068"}]},"bounds":{"x":460,"y":0,"width":2300,"height":138}}</pre>

<h3>3.2 源码使用</h3>
<p>使用指南：</p>
<ol><li>创建工作流</li></ol>
<ol><li>复制上述文件内容</li></ol>
<ol><li>来到工作流页面，ctrl+v粘贴</li></ol>
<ol><li>补充节点信息：这是因为复制后缺少开始节点，后续一些节点的变量值缺失了。直接对比本文第二部分设置即可。</li></ol>

<p>示例截图：</p>
<p><img src="img/422310edd333a4fbb6809040a8938c4d.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/YdhzbZoILoGaBRx9YUWcTjhnnRf/"/></p>

<h2>4 复盘总结</h2>
<ol><li>这个任务其实我做了两个工作流。循环写入和批量写入飞书多维表格中，时间对比：循环逐条数据写入飞书，13条数据大概需要36s，这种方法不消耗coze资源点和飞书的token；批量一次性写入飞书需要8s，但是需要在飞书中设置信息提取，提取也需要时间，还要消耗飞书的token，具体我没测。</li></ol>
<ol><li>抓太多条笔记会触发小红书平台风控。一次性10条左右，我一天断断续续测试了将近100多条，小红书开始风控，第二天恢复正常。</li></ol>
