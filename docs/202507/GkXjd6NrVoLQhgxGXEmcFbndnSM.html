<h1>使用cursor开发飞书字段捷径插件，绕开飞书多维表格调用coze资源点限制全套流程</h1>
<blockquote>来源：<a href="https://vpbq24ngx4.feishu.cn/docx/GkXjd6NrVoLQhgxGXEmcFbndnSM">https://vpbq24ngx4.feishu.cn/docx/GkXjd6NrVoLQhgxGXEmcFbndnSM</a></blockquote>
<h1>写在前面</h1>
<p>本篇文章：</p>

<p>1.星球搜索发现关于开发“飞书字段捷径插件”的帖子比较少，我来补充个</p>
<p>2.本次主要记录分享一下，项目中遇到的实操问题，通过开发“飞书字段捷径插件”来节省资源的案例。</p>
<p>3.本次主要分享使用cursor开发飞书字段捷径插件的流程，不是做具体业务的分享。</p>
<p>看完本篇，你可以学习到一个飞书字段捷径插件开发到上架使用的全流程</p>
<h3>插件效果展示：</h3>

<p><img src="img/daa16d0957b78d87416e375089f8dcc5.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/LBLfb2N1DoRKbPxSiSDc19z6nrp/"/></p>

<h1>需求来源：</h1>
<p>测试小红书虚拟资料项目的时候，</p>
<p>我使用了飞书多维表格来管理笔记，</p>
<p>其中的标题、文案、以及标签、</p>
<p>都是通过图片转文字后调用coze平台来自动生成返回多维表格里的</p>
<p>非常方便、可以在coze里进行复杂数据操作：</p>
<p>可以在coze里调用爬虫脚本爬取关键词的下拉长尾词</p>
<p>然后调用大模型API生成文案、标题、下拉词标签等</p>
<p><img src="img/0bafda4bba0a9a41c5fa903fea5dedb7.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/VbFrbRSw7oUM3hxQlvwcW39fnYg/"/></p>
<p><img src="img/fe4193f0069a4c3f03d929003e2e2ef8.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/HYFdbAPY0omMorxAGDJcb6Txnpg/"/></p>
<p>但是、等笔记数量上来的时候发现调用</p>
<p>coze的资源点不够用了！</p>
<p>开了会员也只是每天可用1000点。</p>
<p>不太够用。除非开团队版或者企业版，</p>
<p>但是这个价格实在没有性价比。</p>

<p><img src="img/eccba1a9ebb9442a06f32fb3c6905964.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/TKarb0icLoVsQfxvhjucO9MWnbf/"/></p>
<p><img src="img/555cbb4377c659ec27f9cae17b6ca7d4.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/EKtxbFW2JoKcGtxF3f2cu7fxnKe/"/></p>
<p>所以为了扩充这个上限。</p>
<p>我决定绕开coze的平台自制一个飞书“字段捷径”插件来复刻coze上的工作流。</p>
<p>因为飞书的插件上架后只可以免费发布在飞书的服务器上，</p>
<p>可以随便调用，就不需要管coze的调用资源限制了。</p>
<h1>一、获取开发文档（重要）</h1>

<p>有了文档，其实使用curosr开发就简单非常多了。</p>
<p><img src="img/efe9749614cc1a6dda9624336fa5a0ae.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/EyhxbJtqJoSe8jxNg0OcTmZ0nDc/"/></p>
<p><img src="img/769b589a6499bbfa9c2a5e41de57d49c.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Ay1QbHkYwoMLI3xLoGScSxmEnDg/"/></p>
<p><img src="img/f0ff3c5bdea1b9a2309036463238d9cf.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/LOOGb6jrdow5wyxD73OcmFKDnqh/"/></p>
<h1>二、创建字段捷径</h1>
<h2>需要使用一个叫"字段捷径开发助手"的插件</h2>
<p>这个助手是官方提供给开发者调试字段捷径用的</p>

<p><img src="img/51eb685e06e85e9924c54cd719183167.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/TWxpbCW8eo5bnBx5HclcN0lQn1R/"/></p>
<p><img src="img/09b72f9c3654d04ba47cae5cec801b38.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/IEaDbFxhNoLvjNxhYg3cTHIwnje/"/></p>

<h1>三、具体开发</h1>
<p>本地环境最好就使用与线上相同的环境配置，</p>
<p>这是线上的运行环境：</p>
<p>Nodejs版本：14.16.0 +</p>

<h2>先拉取官方文档提供的测试项目demo</h2>
<p>按照开发文档，拉取用于测试demo案例</p>
<p><img src="img/1c460d1eae92a9845e6f59488534395e.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Uc7Kbma5lotmsOx1tOJcxqoSnLf/"/></p>

<pre>git clone https://github.com/Lark-Base-Team/field-demo.git</pre>
<p><img src="img/4d9d25f22a27b8850f6f001169969366.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Gb1MbaJcCohMXZxP4nrcZ6G0np7/"/></p>
<h2>启动本地服务</h2>
<pre>cd .\field-demo\
# 安装依赖
npm install

# 启动本地服务
npm run start</pre>
<p><img src="img/19324bc37509465e13d988acf94782a1.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/RF0pbBtDCogSY6xtYfwcZdMXnvd/"/></p>
<p>基于 复制副本，然后点击右侧边栏的「字段捷径调试助手」，或者直接在侧边栏插件市场中搜索“字段捷径调试助手”，然后运行，pin到侧边栏即可。</p>
<p><img src="img/2256678a9b37313ad3fd40e9a4b4ccb9.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/B1fUb5fBwo88I3xgtRacMrUKnJb/"/></p>
<p>在飞书多维表格上，</p>
<p>简单的测试一下，</p>
<p>发现没问题</p>
<p><img src="img/57cf99ba351763e35539ab6302dc94cc.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/CzlUbPHouoIM50x8IX4cSEJrn8c/"/></p>
<p>然后我们就可以开始使用cursor进行开发了</p>
<h2>Cursor开发</h2>
<h3>技巧一： 先将开放文档，存入cursor doc里，方便他调用查询理解</h3>
<p>方式1：</p>
<p><img src="img/5bd28eac96266489a2a34755e390d1c7.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Rrtwb2NWTo1biRxDYVucsTdEnnc/"/></p>
<p>方式二：</p>
<p><img src="img/8e36cd042f6164e90604f2da022427d3.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/SGsub1SRroGbM3xUN5ictUQznub/"/></p>
<p><img src="img/b40c1879b3eae15ee3eb0e20be3f0ecf.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/K2wDb3WBAoc54RxHrXVcIuN9nmd/"/></p>
<p>需要用的的时候就@DOC 下</p>
<h3> 技巧二：开发的界面的逻辑可以直接抄一下已经存在字段路径市场里的“coze”调用插件</h3>
<p>直接复刻他的逻辑和界面参数</p>
<p><img src="img/e00060203fb5dfb39ac046b887436983.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/TTVDbgZugoMpS7xOrVbcnjZinub/"/></p>
<p><img src="img/d5a010634de50418b28b1572aa6c7e5b.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/LVnfbRv4iokBOcx2l9xcj6Iynhd/"/></p>
<p>先和curosr沟通开发传入的参数，</p>
<p>根据自己的业务需求，确定所需的传入参数，</p>
<p>要几个，哪些参数是必须的等。直接让cursor改就行</p>
<p><img src="img/135b94a911470907730bcd59246fce31.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/XRiGbIQM2oRms4xzSl0ckUCDnye/"/></p>
<p><img src="img/2d2999a7b6962a5bd4d19d6316553d3f.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/RcJvbi3PCoalsmxNYLAcmwQlnfc/"/></p>
<p><img src="img/fe69b9982ef167255f3da5ce159bf142.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/ZVtLb1mpKoRYNYx5oXjcLAX1n1c/"/></p>
<p>界面的传入参数等确认完后</p>
<p>就可以编写具体的业务流程了，</p>
<p>也就是把coze里业务工作流一步步搬运过来。</p>
<p>注意最好一个功能一个进行搬运，然后一个个功能进行测试</p>
<p>不要一口气全让cuosor写。</p>
<p>这样很难完成的。</p>

<p>比如调用大模型API</p>
<p>我这里找了一个之前用剩下的中转API进行测试调用</p>
<p>⚠️：让cursor编写调用大模型API的时候，</p>
<p>记得把api网站提供的调用测试用例也复制发给cursor。</p>
<p>这样基本一次两次调试就能成功了</p>
<p><img src="img/0a82f130fac0e6d1b86067c90e108df7.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/KhjWbU3h0ouBCcxrKZDcGNyqnMe/"/></p>
<p><img src="img/e6768ad446b6984e7b8e2dd6c877cbe2.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/A2fQbvLJGoNgUlxuooBcThBbnZe/"/></p>
<p>比如根据写好的提示词生成搜索关键词</p>

<p><img src="img/a7158184660d5161cb402dbf5c887381.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/QjaybMa9mo4bcQx7XAvc3mc8npe/"/></p>
<p><img src="img/ba98c2918d67e4e24bf9cb48727bcf73.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/VzwYbbEHVocSR7xgOtkcNjQ1nAg/"/></p>
<p><img src="img/bf792154a61fd73891488a37738c2d27.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/XeKGb3ISKofQYex9dk0c9ToInfb/"/></p>
<p>因为之前我已经coze里已经在提示词、爬虫脚本、格式处理都跑通了，</p>
<p>所以开发的过程我直接复制的对应的代码/文案生成提示词等，发给cursor很顺利的简单调试都能实现</p>
<h1>四、发布插件</h1>
<p>打包自己的代码，填写飞书提供的表单就可以了，</p>
<p>飞书官方会自动拉群拉你</p>
<p>通过1-2个工作日审核完就能上架使用了</p>
<p><img src="img/cbf6e8413fbaadccadcdea095d7759b3.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/XIX1bcGSjoJXTaxSLgZcVp3onib/"/></p>
<p><img src="img/196bb827e27e5e1e72c79943bdda57d0.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/UezhbBH2KowlLVxmSKPc5a9WnIc/"/></p>

<pre>发布插件：
要发布自己编写的字段捷径插件供自己使用，请遵循以下步骤，基于知识库中的文档信息

1.
打包插件：在项目目录下执行 `npm run pack`（确保Node.js版本为14.16.0或更高），生成output/output.zip文件。
- 示例命令：`npm run pack`
- 输出文件路径：`output/output.zip`
2.
上传文件：将生成的output.zip文件上传到指定位置。

3.
提交发布表单：访问并填写
多维表格捷径插件表单
。在表单中：
- 选择发布范围为“公司内使用”（适用于个人或团队内部使用）。</pre>
<p><img src="img/41cefff34b3107731e01ff093fcf0306.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/VVdQbETDwojKsmxGNvzcfv7lnRg/"/></p>
<h1>最后</h1>
<p>「如果觉得本次分享对你有所启发，别忘了回星球给我点个赞👍」</p>