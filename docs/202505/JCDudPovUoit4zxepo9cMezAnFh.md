# 如何快速搭建一个可商用的扣子工作流教程？

> 来源：[https://vchmk6v2g8.feishu.cn/docx/JCDudPovUoit4zxepo9cMezAnFh](https://vchmk6v2g8.feishu.cn/docx/JCDudPovUoit4zxepo9cMezAnFh)

最近看到很多人都在分享扣子工作流的一些教程，但很多人都是分享火柴人相关的，说实话火柴人心理学相关的，很多人都是用的即梦的文生图功能，即梦出图就是经常感觉差点意思的感觉，需要抽卡（本人有点点强迫症）。

而且很多人搭建只是搭建，并不会涉及到具体后续的复用，图片本质上都是可以去进行复用使用的，如果能解决图片复用，那么，后续就只是Ai出内容的成本了。

我刚好在研究这一块，只不过我更倾向于自己高度自定义开发，比如我用GPT4o来出图，GPT4o的控图效果极好，并且测试后发现，这完全是进入直接商用的级别，因为出图极其准确，而且如果你的图片数据库多了，那么完全是可以去复用图片，复用使用的思路我也会在本文里面进行提供给大家。

![](img/703c05344dd20b64ecf46191538eb465.png)

![](img/52f767fb6e4161fbdb6d8b60859d482d.png)

看完本教程，你可以学会自己搭建完整的扣子工作流，并且次工作流的所有图片均为Ai生成，大概一张图片成本是0.05-3毛钱左右，大概一个视频的成本在1-3块钱。

但是假设你生成了一千条的时候，就可以考虑自己写一份代码去检索复用已有图片了，那成本无限接近于0。

如果你图片需求量很大，需要做检索处理，可以联系我，我给你写代码定制配置。

本教程搭建有难度，难度中等，跟着走，大概率不会出错，会对接到腾讯云存储，以及GPT多个平台。

本文所有的需要复制的参数，或者代码部分都放在这个飞书文档里面了：

## 先看案例

先给大家看几个案例效果，这个就是我直接工作流生成的内容，没有去调整过的，工作流跑完，我就直接导出内容了。

所有的内容都是Ai创建，包括字幕文字位置，这些都可以随意更改，二次修改极其自定义，只不过我这人懒啊，懒的去改，所以，最好直接一步完美！下面这个是生成后的，导入剪映的草稿。

![](img/0d0c45c3514ee671c6fc43fc4e0e8198.png)

![](img/853f43d4d335149c8295690e70c4cbb7.png)

视频效果如下，全都是直接导出，没有进行二次剪辑调整的，也就是说我只输入了一段文案（文案部分也可以使用工作流去生成），其他的就是Ai生成的了。

这里的画风，插画风格颜色，可以自己去进行搭配使用的，因为为了方便，就没做抠图处理，所以用的白底，大家生成的时候可以自己找一下市面上已有的API去调用抠图功能，扣子官方的抠图功能太贵了。

看完这几个视频案例，感觉如何？都是直接导出没有修改过的，部分的图片尺寸可能是有问题，自己用代码去做一下匹配检测，或者加强一下Ai出图的提示词控制。

并且，前三个视频，跟后面的两个视频的区别就是在于，我换了一套提示词，注意！

只是提示词，其他的并没有替换，更换一套提示词的成本有多低我相信大家都是知道的。

如果不会写提示词，可以看一下我旧的发过的飞书文章：

## 需要使用到的工具如下

扣子空间、剪映小助手、腾讯云存储、剪映APP、GPTAPI

## 具体的搭建教程如下

建议本次所有的操作，都使用谷歌浏览器完成操作，扣子空间运行多了，这个浏览器会出现闪退的情况。

### 打开扣子-创建插件

https://www.coze.cn/

进入工作空间，选择资源库，点击插件，我们需要请求GPT4o，并且返回图片地址，就必须要自己写一下插件，因为扣子官方是没有APi接口的。

插件名称，随意填写，描述自己记得就行，默认选云端插件，方便使用，ide运行时选Python3（Ai对Python有独特的支持，不懂代码可以问Ai）

![](img/86721668f54815b50d75b2a24146989d.png)

![](img/6d049ba3b293407ac0a6ed97b12e3dab.png)

创建完成之后，点击在ide中创建工具，就会进入这样的一个空白页面，首先我们需要导入两个包。

![](img/4302c147e0e62d4bf6f72bf46da00e51.png)

![](img/7c973209fd4cfe66434e5bdcdf541963.png)

导入两个包，分别是：

cos-python-sdk-v5@1.9.36

requests@2.32.3

如果版本有问题，尽量与我的保持一致！

![](img/687fe8356dc65831657b96792e81d9c7.png)

然后导入我给大家的Python代码，为了方便复制，代码以及可复制的内容都放在新的飞书文档。

完整的代码地址：https://vchmk6v2g8.feishu.cn/docx/YWZxd2gS2o1ewzxUAojcyA22nNg

对应部分是：1.扣子插件部分代码

这里需要配置使用腾讯云存储，需要自己配置一下。

腾讯云存储具体配置教程这边不提供，建议问一下Ai，或者百度找一下。

下面是参考图以及在哪里生成的位置信息

云存储申请地址：https://console.cloud.tencent.com/cos/bucket

API秘钥申请地址：https://console.cloud.tencent.com/cam/capi

![](img/c2e2aa4343e2e355d777c02f6c0208cc.png)

![](img/4e7ee5553373b98beb89509b24aa4f26.png)

主要是给这几个权限，配置秘钥就行。

![](img/a6cfabda6a9c5934d41751c24c53a9bb.png)

![](img/6bdd1ddb29b0d8beafae26cb59236206.png)

### 尝试运行插件

代码都配置完成后，需要配置一下请求参数，以及返回参数，注意大小写，不会复制就行，请求的JSON参数是对应的。

配置完成后，需要手动运行一下，看下代码是否能真的请求到Ai并且返回图片

请求参数如下。

方便复制点这里：

![](img/9ccf9fd5741ca5db22624bad5f739d81.png)

![](img/f47ee4c9cc2ce5f426ba66febb65f9ac.png)

```
{
  "apikey": "你的APikey",
  "model": "gpt-4o-image",
  "prompt": "创建一系列互联网主题风格统一的插画，用于制作图片轮播视频\n\n风格统一要求：\n- 采用温暖、清新的中国传统教材插画风格\n -纯白色背景(RGB: 255,255,255)，营造柔和舒适的阅读感\n- 色彩方案：使用暖黄色(#FDCB6E)、淡草绿(#BADC58)、柔和砖红(#E17055)和天蓝色(#74B9FF)作为主色调\n- 人物设计：比例协调、头稍大的写意卡通人物，面部表情丰富亲切，类似中国教材插画风格\n- 线条风格：流畅的2像素棕褐色(#8D6E63)描边，保持笔触自然均匀\n- 整体风格：温馨自然，类似80-90年代中国语文课本插图风格，简约而富有童趣\n- 确保所有图片维持一致的视觉风格和手绘质感\n- 禁止有任何文字\n\n序列与连贯性：\n- 保持相似的布局和视觉重心\n- 人物比例和设备大小保持一致\n\n场景描述：昏暗房间里，新手一脸愁容，挠着头，对着电脑屏幕，灯光微黄，凸显迷茫氛围。\n\n构图要素：\n- 16:9横版构图，图片尺寸1280x720\n- 主要信息点居中或遵循三分法则\n    - 纯白色背景(RGB: 255,255,255)，无任何纹理或装饰\n- 留出足够边距，保持画面整洁\n- 重要元素避免靠近边缘，预留转场空间\n\n不包含元素：\n- 不使用过于复杂的技术细节或代码\n- 避免过度现代化或未来感的设计元素\n- 不使用过于鲜艳刺眼的色彩\n- 避免图片间有突兀的风格或色调变化\n- 不包含特定品牌标识或操作系统界面\n\n\n    "
  "req_retry": 5,
  "requrl": "https://你的请求地址/v1/chat/completions"
}
```

运行完成后，腾讯云会返回一个地址，可以自己复制到浏览器打开看看。

这里的APIkey，以及需要看本文下面的，APi中转网站部分，自己生成一下，供参考这篇文章。

https://scys.com/articleDetail/xq_topic/8858125111145242

插件运行完后，自己点一下发布一下，发布成功后，在我们的扣子空间可以看到就有多了一个插件啦。

![](img/71fb801b7dab0a8bd7ff60e544b9814b.png)

接下来就开始搭建我们的工作流了。

### 工作流搭建

工作流创建自己定义名字，备注不要漏了就行。

![](img/3641b9f292b62b2b7c66e3a5af288a63.png)

进入后，默认是有两个按钮，分别是开始跟结束，我们点击开始添加这几个参数：

content、author、title、apikey、apiurl、model

![](img/c000df2f63350f6e176f0f81dab52f6c.png)

![](img/f10837c885184f37539afa1d19ce73b2.png)

### 裁切文案

添加完成之后，添加节点，选择大模型，随便选一个模型继续，用豆包就行了。

这里的提示词以及返回参数，看完整代码文档。

![](img/99cd222b178dcaeaafed080267e2a6c3.png)

![](img/83f32faf2138474157227b488480b849.png)

![](img/801c00592fc575ec507c708cff838671.png)

导入后，记得检查一下返回值看下是否有问题，是否跟我的一致返，如果没问题了，开始第二部分。

### 对接批量生成图片

批处理添加完毕后，再添加一个代码节点，拖拽到批处理体，里面去。

![](img/ab6dbbe2022fa8146f1777de01201643.png)

![](img/81fe6007336323a7a64eaf9378166711.png)

设定代码部分的输入参数，以及返回参数，

![](img/b9eea5860d488c169995a8a92563d5e6.png)

![](img/91eb773a02b0be41ad9ff028c77827dd.png)

代码粘贴完成之后，可以点一下测试，看下是否组装起来了。

点击测试，随便输入一段内容就行，主要是看下有没有组装起来。

比如输入：明亮办公室，一人眉头紧皱，看着文件，桌上有笔和纸张，暖光下满是纠结。

看下运行结果，没问题就代表OK了

![](img/6e352b52276f5b55086fcb05b985802c.png)

添加节点，资源工具，找到刚刚自己创建发布的节点，找到对应的，添加进来。

组装一下参数，注意请求重试次数：req_retry，建议五次以上，逆向APi模型基本都是请求成功了，才会扣费，直接30次都可以。

![](img/cb6d3a05f9be5db3d5bb6aa44e968010.png)

![](img/075b38fcb4e75577b06181fc911499db.png)

最终来到批处理，设置一下返回值，建议名称跟我一样。

![](img/a8b9e27844055abba000ef407a668a11.png)

### 6.对接多维表格（可跳过）

存储图片以及提示词

如不需要多维表格可先跳过此部分，直接把这根线，连接到批量体结尾即可。

添加代码节点，注意输入参数输出参数，以及属性，参考如下图。

这里的url来自于，我们自己创建的插件，返回的图像url。

点击编辑，粘贴一下代码，注意，记得切换成Python模式。

![](img/abe46e12d5b3021a184aa268ca25b8e7.png)

![](img/c18b91aca454381e003c1d5e887624f4.png)

然后你自己创建的多维表格需要有这几个参数，图片预览是通过快捷字段进行绑定的。

前三个列的名字需要一致，然后把完整的飞书多维表格地址丢进来即可，如果首次运行会提示需要飞书授权

如果你是首次使用扣子空间，首次运行一定会失败，需要授权，记得看日志！！！

如果你是首次使用扣子空间，首次运行一定会失败，需要授权，记得看日志！！！

![](img/a4ad4540b31578158ebfe18c8991a15f.png)

![](img/a5413ccf1d2c6ccabbf7b52459dd347f.png)

### 设置配音

添加节点，点击循环，使用大模型裁切的内容。

![](img/7e7e9d63f683ee1be30196db6df1fe40.png)

![](img/69a4bbaea69f63d77afed61e50422eb5.png)

扣子官方配音插件说明：https://www.coze.cn/store/plugin/7426654728890777650

音频部分我们使用火山引擎的，还需要注册一个火山账号，也可以使用扣子里面其他的配音的。

我为了方便，直接就用火山引擎的了，官方稳定。

添加节点，搜索，语音合成，找到扣子官方的配音插件，添加到循环里面。

使用循环-批量生成音频-选择里面的text项，具体的配置参考如下。

![](img/e3dc98fddf2b27d33ade180de7deb19a.png)

![](img/baecf845aba8154a2c3e64b231e2854f.png)

再添加插件，搜索获取音频时长，把配音插件生产出来的链接丢进去，然后工作流走到尾即可。

![](img/7af69d6954a71ff890a533d2d5b615da.png)

![](img/fb3290a9db19e6f5e4bbcae57da0540f.png)

最后，检查一下循环的最终输出结果的名称，选择的变量值是否对得上。

![](img/946bf14ca11332b9893505248520156b.png)

### 创建画板

这里的画板，主要是设置背景幕布，可选，但是建议新手跟我跑一遍，后面再来自己修改。

对应的位置是一个横的画板，一个是中间颜色的画板，这里用不同的颜色线圈出来了对应的位置。

![](img/50a5bbfc4a7bfb55aae304bb39bc64cf.png)

这里放两张牛皮纸的素材给大家。

![](img/c7b137ff8365be9e29272f7557a1266d.png)

![](img/b7a56d778cac10f4c622f2734c967749.png)

我们创建两个画板，如下截图所示

![](img/a67cec3cbdc744b77bbc5d25794724e9.png)

创建后，编辑画板，尺寸选择，16:9 这个就是横向的画板，默认的是白色。

然后在创建一个画板，自己可以变化一下背景颜色，也可以上传我上面给大家预设的牛皮纸的背景，拖拽放大，占据整个画板就行了，这样自定义的背景就有了。

![](img/e7ddaf4a91c55db698e637648d1def51.png)

![](img/8e220ac293bd83e6c25ec6f896ab37af.png)

![](img/91276e97bca2e00f08e2590bf725e695.png)

记得改一下画板名称，防止自己记错。

![](img/9a226c60292afd6846243c226d522597.png)

### 组合参数

接下来我们再来，创建最麻烦的一部分，就是组合参数，所有的参数组合都要对，别搞错。

我们添加一个代码节点，把之前所有的参数找到合适的变量串起来。输出变量名也要一致。

这里本人真心建议，对超复制，别手敲。

注意，有些值的类型，是obj，有些是str。

![](img/a031b5991c5b9b7d440a660de7c74698.png)

![](img/214313826ca85c15a3920a476e4d9ea8.png)

![](img/69607f3f7673bf9a71fc5d41f5a90a1c.png)

然后粘贴我们的JavaScript的代码，注意这里现在是JavaScript，不是Python。

![](img/62fd2eda25fa61695042caab72e6a39c.png)

这里参数组装好了后，就开始下一步，开始创建剪映草稿，就只剩下组转参数了，没有太多难的地方了。

### 创建剪映草稿

打开添加节点，插件，搜索，剪映小助手，或者剪映，找到速推AIGC的，找到create_draft，添加一下。

添加完成后，填入参数，现在我们做的是竖版的视频，参数就是

height：1920 width：1080

user是剪映小助手的，注册链接是：https://www.51aigc.cc/

![](img/7ca448d1a1d0153b01e4e6bab5ca83ed.png)

![](img/568bece59ec404ca056f657e52ca4a42.png)

![](img/ab3e51c691285c758c928ed9aadfd26a.png)

![](img/bb51a8f90e201a4c75df14a746d6ad99.png)

![](img/fa80b6a71b08b6c6b4e852228e5930dd.png)

记得填一下你自己的剪映小助手ID，这样后面视频生成了，你想找到运行结果，直接打开他们的小助手软件，点击我的草稿，就可以看到生成的剪映草稿历史的。

### 添加背景图片

然后就简单了，开始传参数就好了。

添加节点，搜索，剪映小助手，找到，add_images 插件，添加进来。

图片我们这个默认是最底下的图片，所以是竖版图，也就是你加了牛皮纸的那张。

![](img/dcc0a8f1e3b424cb916381594415c8e1.png)

![](img/3f2fdac199658389a0555d235430b7c6.png)

然后接下来在创建一个 add_images ，选择白色背景图的，横版的那张，按照层级一步步往上走。

这里的草稿，所有的直接引用第一个 create_draft 创建返回出来的 draft_url 传递下去即可。

然后再添加一个add_images ，添加所有图片，这里的image_infos就变成了，我们的images。

这里的scale_x跟scale_y 对应的是剪映App里面的缩放百分比，建议设置0.75

![](img/176ccba1735c66ba12d256504ebd486e.png)

![](img/8cd89924c6d5955f3d84c7eada9b476b.png)

### 添加字幕特效以及其他

添加节点，搜索，剪映小助手，找到，add_captions 插件，添加进来。

选择我们代码分割后的texts

![](img/9e44e5522f2be7b976858ebdf2f5cba5.png)

![](img/e8afae7554dd949d53bbd925a09eaae7.png)

对应的参数不理解的可以，直接先按照我的参数进行填写。

然后再添加一个作者，添加一个，链接一个节点，所有的草稿，都是选一开始默认创建的那个草稿就行。

![](img/9ce0990eed58fc38f1c97f9827532ec8.png)

![](img/c398d3c0aeced720b7108fda379c24de.png)

然后再添加一个字幕节点，添加标题，这里的y轴，默认对应的是剪映里面的y轴。

![](img/15dde1b4c4a8690fb6bcb7f6397cb2f0.png)

![](img/6594ccde6189a3c0de26f17ddc7a4d76.png)

再添加特效，特效，具体参考如下图所示，参数也是。

![](img/267a29a6088b56424c29c3eef7e7e616.png)

![](img/0728f6e6c658f8842f72638725eeb79e.png)

再添加音频，背景音乐。这里背景音乐的值，我放在了可复制的飞书文档这里。

再添加音频，添加我们调用火山生成的配音就行。

![](img/8df172d2cddec94b9f531048d1e5c7ce.png)

![](img/1dff066ac9cb03363a925ee8aec86c1b.png)

然后都连起来，保存输出即可。

然后就是运行，运行完成会得到一个这样的JSON后缀的链接，导入到剪映小助手即可。

![](img/9e5d1fbc99ae702262060d871cdc88cb.png)

![](img/90dd6e1957b885b10b60ab29d31057cb.png)

### 导出到剪映视频

需要下载剪映小助手，剪映小助手：https://www.51aigc.cc/

下载后，需要设置一下下载路径，设置好后，下载即可。

![](img/36f03c3dbee10a0047ff177918a26351.png)

![](img/87eec25c5b8b5054d28bf0f083122daf.png)

![](img/aaa00b6e5edf7449570a7838a4b20d86.png)

下载的文件，可以看后缀，后缀就是你刚刚创建的文件名字。

但是要注意的是，如果是重复下载会被覆盖掉的。

![](img/07dd8a2ecef477c67873a53f1b8dc991.png)

![](img/a6add3a7923442824b879b78da6893cc.png)

然后打开草稿，导出视频，就大功告成啦！

## 中转APi网站

目前API出图网站有两个我自己在用的，那个好用便宜用那个吧，从价格来算，麻雀API会便宜很多，个人推荐优先使用麻雀，因为便宜。

麻雀API：https://ismaque.org/ （目前2分钱左右一张了）

中转APi站点充值汇率是0.6

GPT逆向模型：sora_image 0.084一张，约等于5分钱一张，测试出图速度稳定，而且挺快的。

GPT官方模型：gpt-image-1 0.2一张，约等于1毛2一张。

![](img/2592604d167e05309b64ffc3373e6597.png)

![](img/97effed1ec31dac4e7ceb5677fa718c0.png)

个人优先推荐麻雀API，价格来说比较合适，特别是官方逆向模型的价格。

V3API：https://api.v3.cm/

站点汇率是2:1，600块钱，等于站点300额度。

GPT逆向模型：gpt-4o-image ，按照成功请求收费，0.05一张，实测1毛钱一张，但比较容易频繁（循环就行了）。

GPT官方模型：gpt-image-1，按量实际token付费，实际上本人测试，发现约等于人民币1-3毛钱一张。

![](img/3155e2e1f456697155d9ee4d8a21c776.png)

![](img/990bb76e3bf3aa6e8577937c8e900a27.png)

## 抠图API

有些老板会用到抠图的场景，我也简单找了一下API平台，发现这个平台的还可以，比较便宜的。

抠图APi：http://www.koukoutu.com/dev

就是记得把Ai生成内容的提示词改一下，记得改为白色背景就行，人物跟其他的撞色。

## 其他的一些碎碎念

### 图片复用检索思路

如果是检索，可以具体的问一下Ai怎么去实现，反正东西都在这里，就是多一个字段的意思。

而且飞书多维表格本身支持内置调用deepseek，也很便宜。

![](img/a3eee12ceacd17367fcf563b373b7ab4.png)

### 其他行业

我认为其他行业也没啥太多的难度，基本就是换一套提示词就可以了。

提示词的生成生成并不高，任何行业这是一个通用的，只不过就是变化一下思路而已。

如果想要做的更好，可以适当的更去优化一些提示词。

其实这个更适合去做SEO优化，这篇文章结束后，我近期尽量搞一个SEO优化的文章以及工具出来，今年我打算让我自己进入全面agent时代。。。