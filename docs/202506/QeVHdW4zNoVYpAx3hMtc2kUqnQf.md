# 【AI零代码自动化】航海第2天批量小红书图文实操经验分享

> 来源：[https://pyyvw99ag4.feishu.cn/docx/QeVHdW4zNoVYpAx3hMtc2kUqnQf](https://pyyvw99ag4.feishu.cn/docx/QeVHdW4zNoVYpAx3hMtc2kUqnQf)

# 一、发帖初衷

大家好，我是李三疯（思耿），生财传术师

这次报名参与了【AI零代码自动化】主题航海。之前也接触过扣子等工具，没有经过系统性的学习，只知道搬运工作流，比较少自己实操过。这次航海让我可以系统重新梳理学到的内容

教练的实操文档里面有一个是关于养生图文的扣子工作流，我实操完之后觉得可以和飞书多维表格结合，于是就微调了一下教练的工作流，做了一个批量小红书养生图文的飞书多维表格

在群里发了一下，群里小伙伴有很多问我怎么做的，感觉一句两句比较难讲清楚，索性开篇帖子来讲一下我的实操过程，希望更多新手小伙伴可以举一反三

![](img/32cdbfc6eece19ce35add2c2727388a7.png)

![](img/37e9f4196175302c706e0b3824ab650f.png)

# 二、实操步骤

## 步骤一：工作流——智能体——发布为字段捷径

为避免大家理解不完整，我把教练的工作流流程也放过来，加上一点自己的理解

## 工作流

工作流部分分为4块，内容生成——格式对齐——图片生成——链接格式处理

![](img/6cbc4a3172eda0c9491d7d53a672ac11.png)

### 1.内容生成

这里原先的入参项是2个，由于生成字段捷径我试了一下两个不好处理，所以把原先表格的账号名字（那么）一项去掉了，保留了一个输入变量名，其他不变。

![](img/e2cea7c395a0cb0c7f1101be86488b6a.png)

![](img/85550f8d3d954bdad9594e49118b1a0c.png)

![](img/e935dd8b3acc902aa05bb5edf9128d41.png)

#### 养生图文提示词

```
提示词
## 角色
你是一位资深的养生达人，熟悉各种养生知识，擅长通过用户输入的关键词，提供养生建议

## 任务
根据用户输入的关键词，按照<生成规则>和<输出规则>的要求，为用户提供养生建议，一定要注意<限制要求>中的内容

## 生成规则
1。 充分理解用户输入关键词的意图
2。 生成一条养生建议的标题，字数严格要求 8-10 个字，**标题内容要反认知**，这个非常重要
3。 围绕这个标题，生成一个副标题，用来解释标题内容，字数严格要求 15-20 个字
4。 围绕这个标题，生成 9 个小标题，以序号开头，如：“1、xxx”，每个小标题字数不超过 10 个字
5。 为每一个小标题生成一段介绍内容，字数严格要求 90-160 个字，**一定要满足字数要求**，这个很重要。
6\. 围绕标题内容，生成一个联想到的名词，比如标题是“假期就多去 KTV 唱歌”，联想到的名词就是“麦克风”
7。 围绕这个生成的名词，再生成两个关联的名词，比如生成名词是“麦克风”，关联的名词就是“音符”“音箱”

## 输出规则
以 json 格式输出，仅输出如下内容，不要做任何解释。输出格式：
[{
"title": "生成的主标题"，
"subtitle": "（生成的副标题）"，
"main_image": "联想到的名词"，
"element_img1": "关联的名词 1"，
"element_img2": "关联的名词 2"，
"sub_title1": "小标题 1"，
"content1": "介绍 1"，
"sub_title2": "小标题 2"，
"content2": "介绍 2"，
"sub_title3": "小标题 3"，
"content3": "介绍 3"，
"sub_title4": "小标题 4"，
"content4": "介绍 4"
"sub_title5": "小标题 5"，
"content5": "介绍 5"
"sub_title6": "小标题 6"，
"content6": "介绍 6"
"sub_title7": "小标题 7"，
"content7": "介绍 7"
"sub_title8": "小标题 8"，
"content8": "介绍 8"
"sub_title9": "小标题 9"，
"content9": "介绍 9"
}]

## 限制要求
- 严格按照<输出规则>中的格式输出，不要再输出其他任何内容，也不要使用代码块的方式输出，**不要使用```这类的符号**，这个非常重要！

输出示例：[{
"title": "建议：假期就多去 KTV 唱歌"，
"subtitle": "（爱唱歌的人生活得更久，而且还能帮你减肥～
内附 80 首 KTV 必点歌单，假期一起勇闯 KTV）"，
"main_image": "麦克风"，
"element_img1": "音符"，
"element_img2": "音箱"，
"sub_title1": "1、爱唱歌的人更长寿"，
"content1": "美国老年学研究中心通过调查发现，歌剧歌唱家的心脏功能和普通人相比更加强活跃。唱歌能使人长寿。研究证实，唱歌是呼吸肌在特定条件下的一种运动，好处不亚于跑步、游泳、划船等，所以说，经常唱歌，能让你活得更久哦～"，
"sub_title2": "2、有节奏的体内按摩"，
"content2": "唱歌时伴随人体横膈膜，这种内部的循环按摩，是任何一项运动都无法替代的。随着歌曲节奏慢慢的变化，唱歌的呼吸时长时短、时快时慢，呼吸系统不断加压、减压的快速变化使得呼吸系统的肌肉得到锻炼，帮助按摩内脏，激活肺腑潜能，促进脏腑健康。"，
"sub_title3": "3、唱歌能帮助减肥"，
"content3": "唱歌是一项全身运动，可以锻炼全身肌肉，间接帮助你达到减肥的效果。调研显示，60 公斤体重的人唱歌时热量消耗率 2.0 千卡/分钟，唱 2 小时消耗 240 千卡左右，唱一首歌相当于跑 100 米，对于想要减肥又喜欢运动的人来说，不妨试试多唱歌～"，
"sub_title4": "4、提升心理健康"，
"content4": "唱歌能够释放内心的压力和焦虑，研究表明，唱歌可以促进体内内啡肽的分泌，带来愉悦感，帮助改善情绪，提升心理健康。"，
"sub_title5": "5、增强社交能力"，
"content5": "在 KTV 等场合唱歌可以促进人与人之间的互动，增强社交能力。共同唱歌、分享歌曲能够拉近彼此的距离，增进友谊。"，
"sub_title6": "6、提高记忆力"，
"content6": "唱歌需要记忆歌词和旋律，这对大脑是一种锻炼。研究发现，常唱歌的人在记忆和学习新事物方面表现更佳，能够有效提高记忆力。"，
"sub_title7": "7、改善呼吸系统"，
"content7": "唱歌能够增强肺活量，改善呼吸系统功能。通过唱歌时的深呼吸，有助于增加氧气摄入，促进身体健康。"，
"sub_title8": "8、提升自信心"，
"content8": "在众人面前唱歌能够锻炼个人的表现能力，逐渐提升自信心。无论是独唱还是合唱，都会让你在舞台上更加自信。"，
"sub_title9": "9、丰富文化知识"，
"content9": "通过唱歌可以接触到不同的音乐风格和文化背景，丰富个人的文化知识，增加对音乐的理解和欣赏能力。"
}]
```

### 2.格式对齐

这里需要两段代码来对齐数据

#### （1）格式化数据

点击“在 IDE 中编辑”，选择 Python 语言，输入如下代码

输入&输出项参考下图

```
import re
import json

async def main（args: Args） -> Output:
    params = args.params

    # 使用正则表达式提取键值对
    pattern = r'"（title|subtitle|sub_title\d|content\d|main_image|element_img\d+）":\s*"（[^"]*）"'
    matches = re.findall（pattern， params['input']）

    # 构建输出字典
    extracted_values = {}
    for key， value in matches:
        extracted_values[key] = value

    # 包装成输出格式
    ret: Output = {
        "extracted_values": [extracted_values]
    }
    return ret

```

![](img/fba55e0c371a99639a6832cb49816537.png)

![](img/f538a77cf6a9751f72538a7245561ad3.png)

![](img/136a8f58699fc651a8219fd64454988a.png)

![](img/179925d4d1de647b45a5c6cfa2d6108a.png)

#### （2）处理主副标题分行

点击“在 IDE 中编辑”，选择 Python 语言，输入如下代码

输入&输出项参考下图

```
async def main(args: Args) -> Output:
    params = args.params
    title = params.get('title', '').replace('\n', '').replace('\\', '').replace('n', '')
    subtitle = params.get('subtitle', '').replace('\n', '').replace('\\', '').replace（'n'， ''）

    # 处理 title
    if len（title） > 7:
        title1 = title[:7]
        title2 = title[7:]
    else:
        title1 = title
        title2 = ''

    # 处理 subtitle
    if len（subtitle） > 14:
        subtitle1 = subtitle[:14]
        subtitle2 = subtitle[14:]
    else:
        subtitle1 = subtitle
        subtitle2 = ''

    ret: Output = {
        'title1': title1，
        'title2': title2，
        'subtitle1': subtitle1，
        'subtitle2': subtitle2，
    }

    return ret
```

![](img/94a31281de2628ded8cfa534f5fecf8b.png)

![](img/47098a706393147b5e6bc4e057a2e031.png)

### 3.图片生成

图片生成由两块组成，内容页和封面页

内容页涉及到几个参数，每个内容页涉及到1个大标题，3个小标题，3个内容，所以要设置7个元素

设置画布:小红书配图一般是 3:4 的比例，所以我们画布大小设置为 1080*1440

![](img/003381cb3366f9a08633ef16f0f3453a.png)

![](img/676f79bdf134eb463469a0bf5cbcb72d.png)

![](img/17938fbabe4b8df0184d95b96ec9e438.png)

大标题&小标题&内容字体选择

![](img/6eafaf67cc8c1ea38f440d0afa849b8f.png)

![](img/abbd9de373fa18c84d1e78e3299e1a5c.png)

![](img/fcd1586504a648d64bf5d3fe530f99ed.png)

背景图、纯色背景图（可自取下载）

![](img/b3bf10e0e4c6d720a6516689ecc5a46b.png)

![](img/503d0b6de8c09f43644a22e41af88724.png)

封面图

封面图分为三块组成

图片生成-抠图-图片合成（画板）

![](img/96b75b7f065e7fe6ea82c1fc2f87d33e.png)

图片生成：选择【通用】模型即可，比例1:1，

提示词仅输入正向提示词：1 个{{main_image}}，简单插画，卡通风格，纯白色背景，儿童简笔画

抠图：不需要做调整，引入上传图的image格式即可

画板：包含4个文字元素和3个图片元素，把前面的内容引用过来即可

![](img/e80166c09596f06363492c696890b9b5.png)

![](img/99044ff420526f61f7f5bc5cf732e881.png)

![](img/be78a2aafec4d0900a2406867e57b625.png)

### 4.格式处理

由于之前的格式是直出图片，而在飞书多维表格里面是需要导入链接格式，然后把链接转出图片，所以此处我们选择【文本处理】，把链接格式拼接起来

![](img/125a23ddd44c5f1ef8f91d290f42e307.png)

到这一步，工作流已设置完成，可以试运行测试一下是否成功

![](img/917d40036f853a494462d126cc1706d3.png)

## 智能体

这一步比较简单，按图操作即可，我这里就没写提示词了

![](img/50566d59b5f86aaf5cbc6cf737d03134.png)

![](img/10689bdee86084d4b1b32696ecff758b.png)

## 字段捷径

智能体点击发布之后，会跳转到下面这个页面，【飞书多维表格】选择配置

![](img/35dadca14f48231895ce377f288b9531.png)

第一：输出类型选择【文本】

第二：输入类型选择控件【文本输入框】或【文本+超链接】都行，标题：养生图文生成助手

第三：去填写如下图，三个内容都填养生图文生成，发布范围勾选【仅自己可用】不然会很久

发布完之后等待审核，大概30分钟左右，接下来就可以在表格里面看到这个字段捷径

![](img/6a598229a4e5b19e10a07ca0c15c76b4.png)

![](img/958c5ece247317f0fd88a1b05500d16e.png)

## 步骤二：表格搭建——字段捷径使用

这里大家可以点击保存模版，也可以自己搭一个表格。

### 原理：

1.发布完的字段捷径通过引用文本，生成4条图片链接

2.对4条图片链接分别进行提取，1个字段对应1个链接

3.用【链接转附件】字段捷径，将链接转成图片

4.用【批量下载】插件，可将所有图片下载到本地

![](img/962f38032c48f4aa64d93f1fe3d9752f.png)

### 1.配置自己的字段

选择【文本】，在字段捷径中心把自己的字段配置进去，【引用字段】选择前面的文本，点击【自动更新】

生成完之后你会得到4条链接

![](img/bd132544ed04abdcff48397dfa2bf534.png)

![](img/796dae270671a870b4360e44fee68b28.png)

### 2.信息提取字段

需要提取的字段：选择前面产出4条链接的字段

提取信息：提取第1条链接

![](img/79d2de2d6588f61bddfdc4258bae309c.png)

### 3.链接转附件字段

使用该字段，引用链接，将链接转成图片

完成这一步就可以在表格输入文字，输出4张图片啦

为了美化，你也可以把链接字段隐藏

![](img/4b6ddc9d2b496dbcc46673a0cbd82acf.png)

![](img/6078bc8c3e52881df11e9a022248190c.png)

4.批量下载

在多维表格右侧选择插件按钮，选择批量下载，即可把图片全部下载出来

![](img/2f79c06da49404c5dc78133c7fc66053.png)

![](img/8e73da009e1043cdb178557217efc66c.png)