<h1>多账号矩阵管理工具：通过Trae辅助，帮我接入多平台自动发布插件MultiPost。</h1>
<blockquote>来源：<a href="https://udxxg5rx5m.feishu.cn/docx/J7WTdmRetolugfx25HUc6lEpngg">https://udxxg5rx5m.feishu.cn/docx/J7WTdmRetolugfx25HUc6lEpngg</a></blockquote>

<p>接入MultiPost后，</p>
<p>矩阵管理工具负责切换账号，设置浏览器的独立环境、ip，并喂给插件标题、内容、素材，</p>
<p>MultiPost插件则专门负责各种平台发布。</p>
<p>插件里所有动态图文视频平台都可以被调用。</p>

<p>这次接入插件的开发过程让我突然想到一个新点子：</p>
<p>能不能开发一个功能，让新手完全不需要看代码，</p>
<p>只需要写一段简单的“操作脚本”就能自动执行所有步骤？</p>
<p>比如这样的文本：</p>
<p>点击指定按钮》</p>
<p>输入标题》</p>
<p>点击指定按钮》</p>
<p>输入内容》</p>
<p>点击指定按钮》</p>
<p>上传文件》</p>
<p>设置标签》</p>
<p>点击发布按钮。</p>

<p>这样一来，就能快速生成一个符合自己需求的自动化操作流程。</p>
<p>这个想法在技术上是可行的，关键在于有没有足够多的人有这个需求。</p>
<p>实现起来虽然不复杂，但会比较繁琐，</p>
<p>一方面要理解用户的指令文本，</p>
<p>另一方面还要将其准确地转换成可执行的操作流程。</p>
<p>暂时放入我的未来计划里。</p>
<h1>MultiPost插件介绍：</h1>
<p>MultiPost-Extension 是一个 2 月份在 GitHub 上开源的项目。</p>
<p>安装后测试了一下，效果确实不错。</p>
<p>当时发现插件本身还有一个网页版，也可以同步动态。</p>
<p>我看到这个插件可以自动发布到 40+ 个平台，支持的视频、图片、文章等多种内容形式，具体功能如下：</p>
<ul><li>支持同步发布到知乎、微博、小红书、抖音等十多个主流平台</li></ul>
<ul><li>免登录、免注册、免 API Key，完全免费！</li></ul>
<ul><li>支持发布文字、图片、视频等多种内容形式</li></ul>
<ul><li>支持网页联动，可以开发自己的网页并设置自动化，调用扩展的发布功能，如：</li></ul>
<ul><li>自动抓取网页内容并发布到多个平台</li></ul>
<ul><li>定时发布</li></ul>
<ul><li>联动 AI 生成内容</li></ul>
<p>这个扩展主要解决了内容创作者在多平台发布时的痛点。通过一次编辑，就能将内容同步发布到所有平台，大大提高了工作效率。</p>
<p><img src="img/8d42eb9eeb88d099c74b9b1ef427d8c8.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/RaAIbirYPocspNx3dRQcPWVPned/"/></p>
<p><img src="img/e60b38223d6667ec2d78bc662a649885.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/C46nbFbyXoIoCTxwDMBcvboWnPb/"/></p>


<h1>多账号矩阵管理工具介绍：</h1>
<h3>🌟 （无任何收费模式）🚫💰​​</h3>
<h3>🔥 多账号管理工具 🔥</h3>
<p>---------------------------------------------------------------------------------------------------------------------------</p>
<p>🚀 支持创建多个子窗口保存账号，每个窗口独立运行</p>
<p>---------------------------------------------------------------------------------------------------------------------------</p>
<p>子窗口隔离系统：🔒 独立Cookie | 💾 专属缓存 | 🌐 独立IP地址 | 🖐️ 独立设备指纹</p>
<p>---------------------------------------------------------------------------------------------------------------------------</p>
<p>♾️ 无限多开窗口：💻 硬件决定上限，电脑配置越高可开窗口越多</p>
<p>---------------------------------------------------------------------------------------------------------------------------</p>
<p>📂 智能窗口管理：🏷️ 分组标签功能 | 📝 自定义备注 | ⚙️ 批量设置窗口尺寸 | 🧩 自动排列布局</p>
<p>---------------------------------------------------------------------------------------------------------------------------</p>
<p>📌 窗口置顶功能（支持钉选任意窗口）</p>
<p>---------------------------------------------------------------------------------------------------------------------------</p>
<p>🤖 自动化矩阵发布：</p>
<p>📲 内置一些主流平台自动发布系统。（更新精力有限这部分只会跟随我的需求进行更新）</p>
<p>🌐接入了MultiPost，里面有大多数主流平台的自动化发布。因为插件开源，还可以自行开发。并且插件一直在更新。</p>
<p>---------------------------------------------------------------------------------------------------------------------------</p>
<p>🎞️ 素材数据库：🗂️ 可独立配置单独账号素材 | 📦 也可一键配置多个账号素材</p>
<p>---------------------------------------------------------------------------------------------------------------------------</p>
<p>🛠️ 插件扩展中心：🔌 自定义加载Chrome插件</p>
<p>---------------------------------------------------------------------------------------------------------------------------</p>
<p>📡 飞书生态互联：</p>
<p>⚠️ 异常预警系统（监控视频号数据 → 飞书消息报警）</p>
<p>📈 视频号数据统计（视频号数据自动同步飞书表格）</p>
<p>🚧 已预留飞书接口后期可开发。</p>
<p>---------------------------------------------------------------------------------------------------------------------------</p>
<p>统计账号任意信息：</p>
<p>🔄 账号轮巡抓取并记录在软件内。</p>
<p>其实软件的收费功能早就做好了，</p>
<p>只是我屏蔽掉了。</p>
<p>最初开发这个工具的目的是为了能够快速完成任何平台项目的工具开发，</p>
<p>所以做了一个通用的账号管理工具。</p>

<p>后来考虑到已经投入了这么多精力，觉得做成收费工具也能带来一些额外收入。</p>
<p>于是不停完善软件操作方式让他更符合普通用户的习惯。</p>
<p>但是这块细节上的东西实在是太多了。</p>
<p>想要让软件符合各种用户的需求真的很难协调。</p>
<p>软件不停更新也导致一些功能被优化、增加、删除，</p>
<p>我实在懒得录制软件的全部功能说明，</p>
<p>导致好几次使用的朋友跟我反馈一些需求的时候，</p>
<p>我摸摸脑袋告诉他其实这个功能软件上有，</p>
<p>只不过入口藏得有点深。也没有在教程上说明。</p>

<p>有些朋友也很惊讶原来我早就做了相关功能，</p>
<p>一些很小的小功能但是能优化使用体验的我都做了进去。</p>
<p>其实软件可以双击隐藏只显示浮窗（软件最外围空白处双击）。</p>
<p>软件界面右键可以选择简易模式运行（软件最外围空白处单击右键）。</p>
<p>软件本身也可以置顶（软件最外围空白处单击右键）。</p>
<p>双击账号列表最左边可以快捷打开独立账号窗口。</p>
<p>如果账号太多，还可以查找账号，</p>
<p><img src="img/7d99b28568b3c9a6305cefc5133b0de4.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/JcYWbjrdmokkJsxdWbhcwoc9nUb/"/></p>
<p>能根据任何一部分账号信息，对账号进行模糊查询。</p>

<p>软件还有ck注入。可以直接复制浏览器内的ck，粘贴到软件注入的功能里。</p>

<p>还可以将账号信息导出到表格。在表格操作完后，再导入进软件。</p>
<p>甚至软件的账号列表内，看似固定的一些软件备注信息，它的标题名都可以自定义设置。</p>
<p><img src="img/e4ea28f1e8f2fec36b57fb32423e2ba5.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/NVGdbMN29ofERkxV6nTcThPpn1e/"/></p>
<p><img src="img/6c6c73ee80dca5b0a76f51360f6c31fa.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Nf9hbeYSpoqSeLxl56acLyMRnZd/"/></p>
<p>这样做就是为了能让用的朋友可以自己备注相关信息的标题。</p>
<p>还有一些细节的东西等以后有空了再说吧。</p>
<p>但随着时间的推移，我意识到自己的精力有限。</p>
<p>如果收费，可能没法及时维护和更新产品，</p>
<p>而且还得花时间去推广，市面上类似的产品也很多。</p>
<p>目前也不考虑拿这个变现，所以就一直免费供各位使用。</p>

<h1>多账号矩阵管理工具接入MultiPost 指南：</h1>

<h2>MultiPost接入矩阵管理工具方法：</h2>
<p>因为我在矩阵管理工具MultiPost-Extension相关的设置页面留了自定义的接口，</p>
<p>你只要在编写自动发布代码的时候把执行发布的参数定义好，</p>
<p>将参数放入矩阵管理工具内，</p>
<p>就可以被我的软件调用。</p>
<p><img src="img/9bd2d58d8236d9fca03369f8f8119a2a.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/DOgSbJVqBotsfdxEyELcBlwbnGc/"/></p>

<p>MultiPost相关参数可以通过控制台监控找到。</p>
<p>我的多账号矩阵管理工具里已经放入了插件（目前适配到1.1.4版本）。</p>
<p>因为插件更新频繁所以我放慢了适配进度。</p>
<p>启动浏览器时在这里打对钩，浏览器会加载这个插件。</p>
<p><img src="img/f5aea32bbb19734c556b0bca12fc329b.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Wo2abkULvoDkJUxKI3Acw2pInac/"/></p>
<p>点击左上角插件会跳转官方网页https://multipost.app/dashboard/publish/dynamic。</p>
<p>没登录账号的可以先登录账号。</p>
<p>登录后点上面的publish，</p>
<p><img src="img/f944bf4493f6fb31161d8f9686beb435.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/LlmVbsfw2oYqFkx74shcL0Hmnae/"/></p>
<p>就可以看到这个界面，用来填写标题、内容和素材。</p>
<p><img src="img/e364577d86242a54e39cc9847a88a797.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/UdzsbYZTkoDAKkxWSpYcsJ6dnQg/"/></p>
<p>输入内容再选下一步就是选择你想发布的平台了。</p>
<p>这里有很多分类，可以自行研究一下。国外的一些主流平台也有。脸书、ins、X。</p>
<p><img src="img/9e6871ed6d142c374874308f1cabfaeb.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/CGAbbCOx5obcg1xKx5fc1XDBn52/"/></p>
<p>在这个界面按F12控制台，</p>
<p>输入以下代码。这个代码是用来监听消息，方便你看到发送的调用插件的相关消息。</p>
<pre>window.addEventListener('message', (e) =&gt; {
    console.log('收到扩展响应:', e.data);
})</pre>
<p>如果输入代码后弹出这个提示</p>
<p><img src="img/f10d9f2012b30b72b346b8de4b35456b.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/SBy1bcB1MoJiU1xDPaYcAECVnMb/"/></p>
<p>则说明失败了，需要先在控制台输入 allow pasting 敲回车。</p>
<p>注意不能复制粘贴。必须手动输入，</p>
<p><img src="img/9630e42f11e31408c22195a44bf16e89.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/CSrBbYBslooehyx9CCXcAfTKnRe/"/></p>
<p>然后再输入这段监听代码。</p>
<pre>window.addEventListener('message', (e) =&gt; {
    console.log('收到扩展响应:', e.data);
})</pre>

<p>控制台现在这样就表示成功了</p>
<p><img src="img/328d14a47d7fc0c819a81a44948c65ce.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/TmiIbGQIYoFCM8xMGbtcsvWfnIe/"/></p>

<p>这个时候不要关闭控制台。</p>
<p>确保你在官网页面已经填写信息，视频或图片。选择好你想发布的平台。</p>
<p>可以不用登录相关平台账号。</p>
<p>因为我们只需要获取发布时的信息即可。</p>
<p>注意一定是你想发布的平台，不能随便填。</p>
<p>因为要获取发布平台的相关参数。如果你填小红书平台，</p>
<p>获取了小红书发布参数。那么软件发布的就会是小红书的。</p>

<p>设置好发布前的相关资料。点击发布。</p>
<p>插件会跳转网页开始发布。</p>
<p>这个时候就可以把新打开的新页面关闭即可。</p>
<p>因为信息已经建听到了。</p>
<p>在原来的控制台页面可以看到这样一条信息。</p>
<p><img src="img/b8dea675d44c7adc1d8185b69567a473.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Ji6zb2waMobomrxQplVcnMuQnQb/"/></p>
<p>这个时候依次点击小三角。把信息展开。</p>
<p><img src="img/c8d34351bd081f4e28ece1ae1427230a.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/CIErbJg0zodRkrxL9Sac8KC9nPf/"/></p>
<p>找到这部分信息，</p>
<p><img src="img/9833c020892461c4fd16d3334cb109bf.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/DO61bUe3Bo7wUyxWU2LcFlXpnjb/"/></p>

<p>在软件里打开MultiPost设置，</p>
<p>然后把信息填写进去。</p>
<p><img src="img/bf28fbe5729d86dd36fb3d88d18887cf.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/MtI6boCuNosHFdxnzqAcoLmfncf/"/></p>
<p><img src="img/9835a64fa4432191d1fd5042581db887.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/RfXxbDvaAowl28xk0eUcGFR1nFc/"/></p>

<p>可以看到isAutoPublish这个参数并不在这个框内，</p>
<p>isAutoPublish是用来控制是否自动发布的，</p>
<p>如果是 false ,插件会在发布作品的最后一步不点击发布。</p>
<p>默认true就是默认自动发布。所以这里不需要改。如果你需要自己确认是否发布这里可以改成false。</p>
<p>到这里MultiPost 插件相关配置信息就完成了。</p>
<p>然后在软件内设置好每个账号对应的素材文件夹。设置好相关标题。</p>
<p>点击multipost就会开始发送了。</p>
<p><img src="img/48da17076e75adf6f1f40b0e7a531cd6.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/MLegb9P45ogdnMxZ9xdcVstFnRb/"/></p>

<h2>自己开发自定义发布流程：</h2>
<p>而如果你想要对源码进行开发符合自己的自动发布流程。</p>
<p>你要参考MultiPost 的源码，</p>
<p>..\src\sync\ 目录内</p>
<p>Article podcast video dynamic account   这几个文件夹根据动态、视频、文章等做的分类</p>
<p><img src="img/cfe024cb5d3af2687899d144c5b5dfea.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Kx5vbRLK9olN4exsRe2cvSqYnqh/"/></p>
<p>把这个开源项目直接交给Cursor或者Trae分析，</p>
<p>让AI来根据现有代码的框架和逻辑，</p>
<p>喂给AI你想编写自动发布的平台页面的数据，</p>
<p>让他帮你在MultiPost源码基础上。在里面再开发一个页面跳转+填写发布信息+点击发布按钮的相关代码。</p>
<p>打包成谷歌插件，</p>
<p>然后把插件接入矩阵管理工具后理论上也可以被调用。</p>

<h2>软件调用MultiPost插入图片、视频方法：</h2>
<p>想让插件在平台页面上传图片或者视频必须进行环境安装与服务器启动</p>
<ol><li>安装包部署</li></ol>
<ul><li>双击执行 node-v22.14.0-x64.msi → 保持默认路径（C盘）完成安装</li></ul>
<ol><li>环境验证</li></ol>
<ul><li>双击运行 start-server.bat → 输入 8 回车执行检测</li></ul>
<ul><li>预期输出：</li></ul>
<pre>Node版本: v18.19.0  
NPM版本: 10.2.3</pre>
<ol><li>依赖安装</li></ol>
<ul><li>输入 9 回车 → 自动安装 http-server 组件</li></ul>
<ul><li>安装完成返回主菜单</li></ul>
<ol><li>服务启动</li></ol>
<ul><li>返回主菜单 → 选择1 服务启动项 → 保持弹出的 DOS窗口 运行状态</li></ul>
<ul><li>关键信息：记录生成的访问地址 http://localhost:43456/ </li></ul>
<p><img src="img/998bdf623ade78e3356c8b11e47e17c9.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/HNqpbXvpmooVp2xB85McDUCanxY/"/></p>

<hr/>

<h1>我如何通过AI完成了这次软件开发：</h1>
<p>放在以前想要完成这样一次接入，</p>
<p>对我来说是一件非常难完成的事。</p>

<p>我也是前一阵子刷风向标时无意间看到的。</p>
<p>觉得这个插件潜力很大，</p>
<p>于是我联系了插件的作者，</p>
<p>询问了一下插件的相关情况。</p>
<p><img src="img/44c598fd5f2d521f0d273c9c5c582091.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/EdkGbkoJ4otQyMxeTYTc5s4UnOc/"/></p>
<p><img src="img/15c75a4eebb17c4edab2c117707a2aae.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Gs5Bbwd9Hoa4Bcxh6TYc6AWjnBe/"/></p>

<p>作者也给了我一些有用的建议。</p>
<p>原本我打算直接通过元素控制插件来实现自动化，</p>
<p>但和作者聊过后，我决定试试看通过开发文档中的内容来直接控制插件。</p>
<p>中途测试了很久都没成功，</p>
<p>一度有些想放弃。</p>
<p><img src="img/3765ae92adff54f15e06885faf5b51d7.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/XQvcbKt8jo8ATNxQJcIccfDAnrf/"/></p>
<p>因为我并不是专业的程序员，</p>
<p>对一些编程基础知识了解得不多，很多时候都是根据需要学习一些特定的内容。</p>
<p>和项目作者聊天时，作者说的一些东西我也只是半懂不懂，</p>
<p>虽然似懂非懂，但也不想去问太多基础性的问题打扰他。</p>
<p>而且作者自己也没有尝试过用控制台调用，所以他也不能给我解答相关的疑问，</p>
<p>最后只能自己动手试试。</p>
<p>我通过deepseek、GPT和Trae等工具，向他们提问，让他们帮我分析源码，</p>
<p>并给我一些可行的建议。</p>

<p>我先是把开发文档丢给deepseek让他先理解</p>
<p><img src="img/a1b4915e70e98aaf3cda834a6cc7359c.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/ZTIKb1pzPo5VxJxuMJrcuSgVnxb/"/></p>
<p>分析完后，deepseek给了我几个测试代码。</p>
<p>我试了一下，但没成功，于是我考虑让ai帮我分析整个源码，</p>
<p>但是因为源码文件太多，</p>
<p>不适合直接给deepseek，</p>
<p>于是我把源码直接发给了Trae。</p>
<p>我告诉他，我想通过控制台输入来给MultiPost发送消息。</p>
<p>不过Trae看完源码后发给我的测试代码也都没成功，</p>
<p>最后只好自己仔细读了一遍开发文档。</p>
<p>通过文档中关于授权部分的代码，</p>
<p>我发现Trae把 chrome.runtime.sendMessage 和 window.postMessage 混淆了，</p>
<p>这导致我测试了好几个小时都没成功。</p>
<p>接着我开始测试同步消息的代码，但控制台输入后却没有任何反应。</p>
<p>和Trae说完之后，他给了我一个方法。</p>
<pre>window.addEventListener('message', (e) =&gt; {
  if (e.data?.type === 'response') {
    console.log('收到扩展响应:', e.data);
  }
})</pre>
<p>他让我用来监听消息。</p>
<p>测试了一下，果然能看到消息了。</p>
<p>不过控制台输入的监听消息格式和我想发送的消息不太一样。</p>
<p>于是我开始把代码一部分一部分地对比，然后参考开发文档来检查。</p>
<p>终于成功发送了标题+内容的信息，插件也能正常调用了。</p>
<p>不过带图片和视频的消息还需要进一步研究。</p>
<p>我发现当我用插件发送带图片的消息时，图片部分的代码并不是一个文件路径。</p>
<p>于是我就问Trae。</p>

<p><img src="img/2bb5e79ce840831fc1d7410186bbe08f.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Cu9Jbxcbeo5dtqxSLy0c768nnCh/"/></p>
<p>Trae给我做了一个HTML页面，并且直接帮我启动了服务器。</p>
<p>这个操作有点出乎我的意料。</p>
<p>因为这个软件还有很多朋友在用，我本来希望能简化操作方式。</p>
<p>于是我问了其他的可能性，</p>
<p>Trae告诉我，启动服务器这一步是绕不开的。</p>
<p><img src="img/977ada2828e3efe93c1a4abe4d176f80.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/QPlCbx3iuo2wo4xUIRScmkt1nRh/"/></p>
<p>于是我要求trae能给我一个相对简单的安装方式，</p>
<p>试用了几个方式，最后还是选择用Node.js。</p>
<p><img src="img/2f59e4e6547f45019a97f15205c2f796.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/NsambnP39oml5Kxz34vcSsQanEg/"/></p>
<p>我还让Trae帮我做一个BAT文件，方便安装插件环境并启动服务器。</p>
<p>我觉得这种方式会让插件的环境安装变得更简单，也对新手更友好。</p>

<p>不过因为我自己不太懂Windows批处理脚本语言，</p>
<p>Trae做的BAT文件在执行时总会闪退，很多地方都会触发这个问题。</p>
<p>于是，我只好把代码一点一点拆开执行，逐步分析。</p>
<p><img src="img/5802cd69447c1c210b52e0ed840cfe07.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/LX0FbyNvXoNUIIxxW26c6nZhnHb/"/></p>
<p><img src="img/bc90cbe9ff92b7bbbd23b5bf1a9f935d.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/Ub2VbOsiJo78Apx4IsXcI8tInhe/"/></p>
<p>我和几个AI来回分析了好几次，</p>
<p>最后才终于把BAT文件弄好了。</p>
<p><img src="img/cdbbf3a31e2364c164e438866fad2282.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/NqLQboFD4oxEgrxaqsLcTGy5n0d/"/></p>
<p>安装好Node.js后，打开BAT文件，环境检查没问题后，就可以安装http-server，安装完后就能启动服务器。</p>
<p>服务器配置好后，我通过自己做的页面可以获取图片信息了。</p>
<p>不过，参数拼接还是遇到了问题。</p>
<p>开发文档里的参数只有标题和内容，</p>
<p>虽然我通过控制台捕获到了图片信息，但自己拼接后还是报错。</p>
<p>于是，我把问题交给Trae帮我梳理。</p>
<p><img src="img/6d3a9bedae4cf654a5ec5fc915ae4ebd.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/XNGqbJFBnokd2kxSQsCcn9A2nxg/"/></p>
<p>最终完成拼接后，我在控制台手动测试，</p>
<p>插件成功调用，图片没有问题。</p>
<p>接着，我让Trae在页面增加了视频上传功能，</p>
<p>修改代码后，整个流程也正常运行了。</p>
<p><img src="img/b2bdefb8cf2e58f07665d4781808cfed.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/DmEHbK5X4oVd9ZxUag7cjMvznvU/"/></p>
<p>按照之前的格式拼接后，</p>
<p>插件确实被调用了，</p>
<p>但是在上传视频的页面却提示文件类型不对。</p>
<p>我在几个平台测试后，都是类似的提示。</p>
<p>问了几个AI，给出的原因都不对，</p>
<p>Trae一直说是少加了“videos”，</p>
<p>但我测试后发现并不是这个原因。</p>
<p>AI太固执，我换了个提问方式，</p>
<p>尝试了很久，还是没找到解决方法。</p>
<p><img src="img/85a34cbe967b21c3caef012fc1f5c2de.png" data-original-src="https://internal-api-drive-stream.feishu.cn/space/api/box/stream/download/v2/cover/ODAzbkxpwoco95xZvA2cOYbsnkb/"/></p>
<p>最后我咨询了作者，</p>
<p>结果作者也不太清楚是什么问题，</p>
<p>于是我只好再次监听插件发送的消息，</p>
<p>自己观察接收到的消息和我发送的消息到底有什么区别，</p>
<p>最终我发现，图片的参数是数组，而视频的参数不是，</p>
<p>只需要把两边的【】删除就可以了。</p>
<p>至此，整个流程的测试终于完成。</p>
<p>至于文章同步的功能，等以后有需要的人再考虑接入吧。</p>

<p>调用插件部分的命令都梳理清晰后，</p>
<p>就要开始考虑批量自动化调用，</p>
<p>原来软件里的发布方式是单线程的，</p>
<p>本来我还是想延续单线程方式去执行，</p>
<p>但是考虑到效率问题，</p>
<p>我还是决定增加多线程发布的方式，</p>
<p>这样的话原来的架构就完全不能用，</p>
<p>只好重新写了多线程对浏览器的操控，</p>
<p>这个过程里我发现一个问题，</p>
<p>我的工具原本对于浏览器的伪装是按标签页形式伪装，</p>
<p>但是调用插件会使浏览器新打开额外标签页，</p>
<p>虽然也能对标签页继续进行伪装但我认为这种方式并不完美，</p>
<p>于是我又更改了伪装方式，从浏览器启动就进行伪装，</p>
<p>随着代码量增多，任何一个改动都是牵一发而动全身。</p>

<p>经过多次测试修改，</p>
<p>目前软件已经可以完美创建独立环境启动浏览器，</p>
<p>然后根据素材库内容，向插件发送调用信息，</p>
<p>插件自行完成剩余发布，</p>
<p>自定义了等待时间，</p>
<p>等待时间结束自动关闭浏览器，</p>

<h1>开发MultiPost插件注意事项：</h1>
<p>MultiPost源码在这里：https://github.com/leaperone/MultiPost-Extension/issues</p>
<p>如果想开发需要注意。</p>
<p>因为插件源码打包出来的插件，首次加载会跳转MultiPost 官网，</p>
<p>而矩阵管理工具每次启动浏览器都是打开的新环境，</p>
<p>这就导致MultiPost 加载时每次都会跳转官网，</p>
<p>所以要对插件移除这里的代码。</p>
<p>1. 移除了插件首次加载时的官网跳转功能 (修改位置: src/background/index.ts 第28-30行)</p>

<p>插件源码里还有一个授权代码。只有授权的网页才能调用插件。</p>
<p>批量操作账号发布作品的话一个一个手动授权很麻烦。</p>
<p>所以要将源码的验证也关闭。</p>
<p>2.移除了插件的授权验证机制 (修改位置: src/contents/extension.ts 第32-43行)</p>

<p>下载源码开发这个插件时。要移除这两个位置的源码。可以选择注释掉。</p>
<p>如果不懂的话把MultiPost源码喂给ai，并把我刚刚加粗的两段话复制给ai让他帮你完成即可。</p>
